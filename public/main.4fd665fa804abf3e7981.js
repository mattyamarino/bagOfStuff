(self.webpackChunkbag_of_stuff=self.webpackChunkbag_of_stuff||[]).push([[179],{255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=255,t.exports=e},25:(t,e,n)=>{"use strict";n.d(e,{AFp:()=>es,ip1:()=>Xo,CZH:()=>ts,hGG:()=>Ws,z2F:()=>Gs,sBO:()=>Ao,_Vd:()=>$i,EJc:()=>cs,SBq:()=>eo,qLn:()=>Zn,gxx:()=>hi,OlP:()=>qe,zs3:()=>Si,ZZ4:()=>wo,aQg:()=>To,soG:()=>us,h0i:()=>Lo,PXZ:()=>Vs,R0b:()=>ws,FiY:()=>nn,Lbi:()=>os,g9A:()=>is,Qsj:()=>ro,FYo:()=>no,JOm:()=>Xn,Tiy:()=>oo,q3G:()=>Hn,Rgc:()=>Ro,dDg:()=>As,q4F:()=>ao,GfV:()=>so,s_b:()=>Mo,ifc:()=>U,eFA:()=>Us,G48:()=>Fs,X6Q:()=>Ls,_c5:()=>Ks,VLi:()=>Ns,c2e:()=>as,zSh:()=>di,wAp:()=>zi,vHH:()=>_,EiD:()=>Bn,mCW:()=>Sn,qzn:()=>pn,JVY:()=>mn,pB0:()=>wn,eBb:()=>vn,L6k:()=>gn,LAX:()=>bn,cg1:()=>Bi,Tjo:()=>zs,kL8:()=>Gi,yhl:()=>yn,dqk:()=>H,sIi:()=>Ci,QGY:()=>Li,F4k:()=>Fi,RDi:()=>At,AaK:()=>m,z3N:()=>dn,TTD:()=>_t,Xpm:()=>et,lG2:()=>ut,Yz7:()=>I,cJS:()=>S,oAB:()=>ot,Yjl:()=>ct,Y36:()=>Di,qZA:()=>Pi,TgZ:()=>Oi,LFG:()=>Ye,$8M:()=>Ve,kYT:()=>st,_uU:()=>Vi});var r=n(959),i=n(570),o=n(318),s=n(906),a=n(673);function u(){return function(t){return t.lift(new c(t))}}class c{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new l(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class l extends a.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class h extends o.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new i.w,t.add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=i.w.EMPTY)),t}refCount(){return u()(this)}}const f=(()=>{const t=h.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class d extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function p(){return new r.xQ}function y(t){for(let e in t)if(t[e]===y)return e;throw Error("Could not find renamed property on target object.")}function m(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(m).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function g(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const v=y({__forward_ref__:y});function b(t){return t.__forward_ref__=b,t.toString=function(){return m(this())},t}function w(t){return"function"==typeof(e=t)&&e.hasOwnProperty(v)&&e.__forward_ref__===b?t():t;var e}class _ extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function T(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():function(t){return"string"==typeof t?t:null==t?"":String(t)}(t)}function E(t,e){const n=e?` in ${e}`:"";throw new _("201",`No provider for ${T(t)} found${n}`)}function I(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function S(t){return{providers:t.providers||[],imports:t.imports||[]}}function k(t){return A(t,C)||A(t,D)}function A(t,e){return t.hasOwnProperty(e)?t[e]:null}function x(t){return t&&(t.hasOwnProperty(N)||t.hasOwnProperty(R))?t[N]:null}const C=y({"\u0275prov":y}),N=y({"\u0275inj":y}),D=y({ngInjectableDef:y}),R=y({ngInjectorDef:y});var O=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let P;function L(t){const e=P;return P=t,e}function F(t,e,n){const r=k(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&O.Optional?null:void 0!==e?e:void E(m(t),"Injector")}function M(t){return{toString:t}.toString()}var V=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),U=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const j="undefined"!=typeof globalThis&&globalThis,q="undefined"!=typeof window&&window,B="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,G="undefined"!=typeof global&&global,H=j||G||q||B,z={},K=[],J=y({"\u0275cmp":y}),W=y({"\u0275dir":y}),Q=y({"\u0275pipe":y}),Z=y({"\u0275mod":y}),$=y({"\u0275loc":y}),Y=y({"\u0275fac":y}),X=y({__NG_ELEMENT_ID__:y});let tt=0;function et(t){return M(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===V.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||K,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||U.Emulated,id:"c",styles:t.styles||K,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=tt++,n.inputs=at(t.inputs,e),n.outputs=at(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(nt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(rt):null,n})}function nt(t){return lt(t)||function(t){return t[W]||null}(t)}function rt(t){return function(t){return t[Q]||null}(t)}const it={};function ot(t){return M(()=>{const e={type:t.type,bootstrap:t.bootstrap||K,declarations:t.declarations||K,imports:t.imports||K,exports:t.exports||K,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(it[t.id]=t.type),e})}function st(t,e){return M(()=>{const n=ht(t,!0);n.declarations=e.declarations||K,n.imports=e.imports||K,n.exports=e.exports||K})}function at(t,e){if(null==t)return z;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const ut=et;function ct(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function lt(t){return t[J]||null}function ht(t,e){const n=t[Z]||null;if(!n&&!0===e)throw new Error(`Type ${m(t)} does not have '\u0275mod' property.`);return n}const ft=20,dt=10;function pt(t){return Array.isArray(t)&&"object"==typeof t[1]}function yt(t){return Array.isArray(t)&&!0===t[1]}function mt(t){return 0!=(8&t.flags)}function gt(t){return 2==(2&t.flags)}function vt(t){return null!==t.template}function bt(t,e){return t.hasOwnProperty(Y)?t[Y]:null}class wt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function _t(){return Tt}function Tt(t){return t.type.prototype.ngOnChanges&&(t.setInput=It),Et}function Et(){const t=St(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===z)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function It(t,e,n,r){const i=St(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:z,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new wt(u&&u.currentValue,e,s===z),t[r]=e}function St(t){return t.__ngSimpleChanges__||null}let kt;function At(t){kt=t}function xt(t){return!!t.listen}_t.ngInherit=!0;const Ct={createRenderer:(t,e)=>void 0!==kt?kt:"undefined"!=typeof document?document:void 0};function Nt(t){for(;Array.isArray(t);)t=t[0];return t}function Dt(t,e){return Nt(e[t.index])}function Rt(t,e){const n=e[t];return pt(n)?n:n[0]}function Ot(t){return 128==(128&t[2])}function Pt(t,e){return null==e?null:t[e]}function Lt(t){t[18]=0}function Ft(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Mt={lFrame:te(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Vt(){return Mt.bindingsEnabled}function Ut(){return Mt.lFrame.lView}function jt(){return Mt.lFrame.tView}function qt(){let t=Bt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Bt(){return Mt.lFrame.currentTNode}function Gt(t,e){const n=Mt.lFrame;n.currentTNode=t,n.isParent=e}function Ht(){return Mt.lFrame.isParent}function zt(){return Mt.isInCheckNoChangesMode}function Kt(t){Mt.isInCheckNoChangesMode=t}function Jt(t,e){const n=Mt.lFrame;n.bindingIndex=n.bindingRootIndex=t,Wt(e)}function Wt(t){Mt.lFrame.currentDirectiveIndex=t}function Qt(t){Mt.lFrame.currentQueryIndex=t}function Zt(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function $t(t,e,n){if(n&O.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&O.Host||(r=Zt(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Mt.lFrame=Xt();return r.currentTNode=e,r.lView=t,!0}function Yt(t){const e=Xt(),n=t[1];Mt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Xt(){const t=Mt.lFrame,e=null===t?null:t.child;return null===e?te(t):e}function te(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ee(){const t=Mt.lFrame;return Mt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ne=ee;function re(){const t=ee();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ie(t){Mt.lFrame.selectedIndex=t}function oe(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function se(t,e,n){ce(t,e,3,n)}function ae(t,e,n,r){(3&t[2])===n&&ce(t,e,n,r)}function ue(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ce(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(le(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function le(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const he=-1;class fe{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function de(t,e,n){const r=xt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];64===s.charCodeAt(0)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function pe(t){return 3===t||4===t||6===t}function ye(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||me(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function me(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function ge(t){return t!==he}function ve(t){return 32767&t}function be(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let we=!0;function _e(t){const e=we;return we=t,e}let Te=0;function Ee(t,e){const n=Se(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ie(r.data,t),Ie(e,null),Ie(r.blueprint,null));const i=ke(t,e),o=t.injectorIndex;if(ge(i)){const t=ve(i),n=be(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Ie(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Se(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function ke(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return he;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return he}function Ae(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(X)&&(r=n[X]),null==r&&(r=n[X]=Te++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function xe(t,e,n){if(n&O.Optional)return t;E(e,"NodeInjector")}function Ce(t,e,n,r){if(n&O.Optional&&void 0===r&&(r=null),0==(n&(O.Self|O.Host))){const i=t[9],o=L(void 0);try{return i?i.get(e,r,n&O.Optional):F(e,r,n&O.Optional)}finally{L(o)}}return xe(r,e,n)}function Ne(t,e,n,r=O.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(X)?t[X]:void 0;return"number"==typeof e?e>=0?255&e:Re:e}(n);if("function"==typeof o){if(!$t(e,t,r))return r&O.Host?xe(i,n,r):Ce(e,n,r,i);try{const t=o(r);if(null!=t||r&O.Optional)return t;E(n)}finally{ne()}}else if("number"==typeof o){let i=null,s=Se(t,e),a=he,u=r&O.Host?e[16][6]:null;for((-1===s||r&O.SkipSelf)&&(a=-1===s?ke(t,e):e[s+8],a!==he&&Fe(r,!1)?(i=e[1],s=ve(a),e=be(a,e)):s=-1);-1!==s;){const t=e[1];if(Le(o,s,t.data)){const t=Oe(s,e,n,i,r,u);if(t!==De)return t}a=e[s+8],a!==he&&Fe(r,e[1].data[s+8]===u)&&Le(o,s,e)?(i=t,s=ve(a),e=be(a,e)):s=-1}}}return Ce(e,n,r,i)}const De={};function Re(){return new Me(qt(),Ut())}function Oe(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=function(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&vt(t)&&t.type===n)return u}return null}(a,s,n,null==r?gt(a)&&we:r!=s&&0!=(3&a.type),i&O.Host&&o===a);return null!==u?Pe(e,s,u,a):De}function Pe(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof fe){const s=i;s.resolving&&function(t,e){throw new _("200",`Circular dependency in DI detected for ${t}`)}(T(o[n]));const a=_e(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?L(s.injectImpl):null;$t(t,r,O.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Tt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&L(u),_e(a),s.resolving=!1,ne()}}return i}function Le(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Fe(t,e){return!(t&O.Self||t&O.Host&&e)}class Me{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ne(this._tNode,this._lView,t,void 0,e)}}function Ve(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(pe(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(qt(),t)}const Ue="__parameters__";function je(t,e,n){return M(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Ue)?t[Ue]:Object.defineProperty(t,Ue,{value:[]})[Ue];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class qe{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=I({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}function Be(t,e){t.forEach(t=>Array.isArray(t)?Be(t,e):e(t))}function Ge(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function He(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const ze={},Ke=/\n/gm,Je="__source",We=y({provide:String,useValue:y});let Qe;function Ze(t){const e=Qe;return Qe=t,e}function $e(t,e=O.Default){if(void 0===Qe)throw new Error("inject() must be called from an injection context");return null===Qe?F(t,void 0,e):Qe.get(t,e&O.Optional?null:void 0,e)}function Ye(t,e=O.Default){return(P||$e)(w(t),e)}function Xe(t){const e=[];for(let n=0;n<t.length;n++){const r=w(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=O.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(Ye(t,n))}else e.push(Ye(r))}return e}function tn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const en=tn(je("Inject",t=>({token:t})),-1),nn=tn(je("Optional"),8),rn=tn(je("SkipSelf"),4);let on;function sn(t){var e;return(null===(e=function(){if(void 0===on&&(on=null,H.trustedTypes))try{on=H.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return on}())||void 0===e?void 0:e.createHTML(t))||t}class an{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class un extends an{getTypeName(){return"HTML"}}class cn extends an{getTypeName(){return"Style"}}class ln extends an{getTypeName(){return"Script"}}class hn extends an{getTypeName(){return"URL"}}class fn extends an{getTypeName(){return"ResourceURL"}}function dn(t){return t instanceof an?t.changingThisBreaksApplicationSecurity:t}function pn(t,e){const n=yn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function yn(t){return t instanceof an&&t.getTypeName()||null}function mn(t){return new un(t)}function gn(t){return new cn(t)}function vn(t){return new ln(t)}function bn(t){return new hn(t)}function wn(t){return new fn(t)}class _n{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(sn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Tn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=sn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=sn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const En=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,In=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Sn(t){return(t=String(t)).match(En)||t.match(In)?t:"unsafe:"+t}function kn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function An(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const xn=kn("area,br,col,hr,img,wbr"),Cn=kn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Nn=kn("rp,rt"),Dn=An(Nn,Cn),Rn=An(xn,An(Cn,kn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),An(Nn,kn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Dn),On=kn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Pn=kn("srcset"),Ln=An(On,Pn,kn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),kn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Fn=kn("script,style,template");class Mn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Rn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Fn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Ln.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;On[o]&&(s=Sn(s)),Pn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Sn(t.trim())).join(", ")),this.buf.push(" ",e,'="',jn(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Rn.hasOwnProperty(e)&&!xn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(jn(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Vn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Un=/([^\#-~ |!])/g;function jn(t){return t.replace(/&/g,"&amp;").replace(Vn,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Un,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let qn;function Bn(t,e){let n=null;try{qn=qn||function(t){const e=new Tn(t);return function(){try{return!!(new window.DOMParser).parseFromString(sn(""),"text/html")}catch(t){return!1}}()?new _n(e):e}(t);let r=e?String(e):"";n=qn.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=qn.getInertBodyElement(r)}while(r!==o);return sn((new Mn).sanitizeChildren(Gn(n)||n))}finally{if(n){const t=Gn(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function Gn(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Hn=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function zn(t,e){t.__ngContext__=e}function Kn(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Jn(t){return t.ngDebugContext}function Wn(t){return t.ngOriginalError}function Qn(t,...e){t.error(...e)}class Zn{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Qn}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Jn(t)?Jn(t):this._findContext(Wn(t)):null}_findOriginalError(t){let e=Wn(t);for(;e&&Wn(e);)e=Wn(e);return e}}const $n=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(H))();function Yn(t){return t instanceof Function?t():t}var Xn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function tr(t,e){return(void 0)(t,e)}function er(t){const e=t[3];return yt(e)?e[3]:e}function nr(t){return ir(t[13])}function rr(t){return ir(t[4])}function ir(t){for(;null!==t&&!yt(t);)t=t[4];return t}function or(t,e,n,r,i){if(null!=r){let o,s=!1;yt(r)?o=r:pt(r)&&(s=!0,r=r[0]);const a=Nt(r);0===t&&null!==n?null==i?fr(e,n,a):hr(e,n,a,i||null,!0):1===t&&null!==n?hr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=pr(t,e);r&&function(t,e,n,r){xt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Nt(n)&&or(e,t,r,o,i);for(let s=dt;s<n.length;s++){const i=n[s];wr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function sr(t,e,n){return xt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function ar(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ft(i,-1)),n.splice(r,1)}function ur(t,e){if(t.length<=dt)return;const n=dt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&ar(o,r),e>0&&(t[n-1][4]=r[4]);const s=He(t,dt+e);wr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function cr(t,e){if(!(256&e[2])){const n=e[11];xt(n)&&n.destroyNode&&wr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return lr(t[1],t);for(;e;){let n=null;if(pt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)pt(e)&&lr(e[1],e),e=e[3];null===e&&(e=t),pt(e)&&lr(e[1],e),n=e&&e[4]}e=n}}(e)}}function lr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof fe)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Nt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&xt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&yt(e[3])){n!==e[3]&&ar(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function hr(t,e,n,r,i){xt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function fr(t,e,n){xt(t)?t.appendChild(e,n):e.appendChild(n)}function dr(t,e,n,r,i){null!==r?hr(t,e,n,r,i):fr(t,e,n)}function pr(t,e){return xt(t)?t.parentNode(e):e.parentNode}function yr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===U.None||e===U.Emulated)return null}return Dt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Dt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)dr(o,i,n[a],s,!1);else dr(o,i,n,s,!1)}function mr(t,e){if(null!==e){const n=e.type;if(3&n)return Dt(e,t);if(4&n)return vr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return mr(t,n);{const n=t[e.index];return yt(n)?vr(-1,n):Nt(n)}}if(32&n)return tr(e,t)()||Nt(t[e.index]);{const n=gr(t,e);return null!==n?Array.isArray(n)?n[0]:mr(er(t[16]),n):mr(t,e.next)}}return null}function gr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function vr(t,e){const n=dt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return mr(t,r)}return e[7]}function br(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&zn(Nt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)br(t,e,n.child,r,i,o,!1),or(e,t,i,a,o);else if(32&u){const s=tr(n,r);let u;for(;u=s();)or(e,t,i,u,o);or(e,t,i,a,o)}else 16&u?_r(t,e,r,n,i,o):or(e,t,i,a,o);n=s?n.projectionNext:n.next}}function wr(t,e,n,r,i,o){br(n,r,t.firstChild,e,i,o,!1)}function _r(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)or(e,t,i,a[u],o);else br(t,e,a,s[3],i,o,!0)}function Tr(t,e,n){xt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Er(t,e,n){xt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Ir(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Sr="ng-template";function kr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Ir(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Ar(t){return 4===t.type&&t.value!==Sr}function xr(t,e,n){return e===(4!==t.type||n?t.value:Sr)}function Cr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(pe(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!xr(t,u,n)||""===u&&1===e.length){if(Nr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!kr(t.attrs,c,n)){if(Nr(r))return!1;s=!0}continue}const l=Dr(8&r?"class":u,i,Ar(t),n);if(-1===l){if(Nr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Ir(e,c,0)||2&r&&c!==t){if(Nr(r))return!1;s=!0}}}}else{if(!s&&!Nr(r)&&!Nr(u))return!1;if(s&&Nr(u))continue;s=!1,r=u|1&r}}return Nr(r)||s}function Nr(t){return 0==(1&t)}function Dr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Rr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Cr(t,e[r],n))return!0;return!1}function Or(t,e){return t?":not("+e.trim()+")":e}function Pr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Nr(s)||(e+=Or(o,i),i=""),r=s,o=o||!Nr(r);n++}return""!==i&&(e+=Or(o,i)),e}const Lr={};function Fr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Qt(i),n.contentQueries(2,e[o],o)}}}function Mr(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Lt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Vr(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Bt(),s=Ht(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Mt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Mt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Gt(o,!0),o}function Ur(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function jr(t,e,n){Yt(e);try{const r=t.viewQuery;null!==r&&ui(1,r,n);const i=t.template;null!==i&&Gr(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Fr(t,e),t.staticViewQueries&&ui(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)ii(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,re()}}function qr(t,e,n,r){const i=e[2];if(256==(256&i))return;Yt(e);const o=zt();try{Lt(e),Mt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Gr(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&se(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ae(e,n,0,null),ue(e,0)}if(function(t){for(let e=nr(t);null!==e;e=rr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ft(r,1),n[2]|=1024}}}(e),function(t){for(let e=nr(t);null!==e;e=rr(e))for(let t=dt;t<e.length;t++){const n=e[t],r=n[1];Ot(n)&&qr(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Fr(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&se(e,n)}else{const n=t.contentHooks;null!==n&&ae(e,n,1),ue(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ie(~r);else{const i=r,o=n[++t],s=n[++t];Jt(o,i),s(2,e[i])}}}finally{ie(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)ni(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&ui(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&se(e,n)}else{const n=t.viewHooks;null!==n&&ae(e,n,2),ue(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ft(e[3],-1))}finally{re()}}function Br(t,e,n,r){const i=e[10],o=!zt(),s=4==(4&e[2]);try{o&&!s&&i.begin&&i.begin(),s&&jr(t,e,r),qr(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Gr(t,e,n,r,i){const o=Mt.lFrame.selectedIndex,s=2&r;try{ie(-1),s&&e.length>ft&&function(t,e,n,r){if(!r)if(3==(3&e[2])){const n=t.preOrderCheckHooks;null!==n&&se(e,n,20)}else{const n=t.preOrderHooks;null!==n&&ae(e,n,0,20)}ie(20)}(t,e,0,zt()),n(r,i)}finally{ie(o)}}function Hr(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=zr(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function zr(t,e,n,r,i,o,s,a,u,c){const l=ft+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Lr);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Kr(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Jr(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Wr(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Qr(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Zr(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;vt(e)&&(n[""]=t)}}function $r(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Yr(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=bt(i.type)),s=new fe(o,vt(i),null);t.blueprint[r]=s,n[r]=s,Jr(t,e,0,r,Ur(t,n,i.hostVars,Lr),i)}function Xr(t,e,n){const r=Dt(e,t),i=Hr(n),o=t[10],s=oi(t,Mr(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function ti(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function ei(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function ni(t,e){const n=Rt(e,t);if(Ot(n)){const t=n[1];80&n[2]?qr(t,n,t.template,n[8]):n[5]>0&&ri(n)}}function ri(t){for(let n=nr(t);null!==n;n=rr(n))for(let t=dt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];qr(t,e,t.template,e[8])}else e[5]>0&&ri(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Rt(e[n],t);Ot(r)&&r[5]>0&&ri(r)}}function ii(t,e){const n=Rt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),jr(r,n,n[8])}function oi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function si(t,e,n){const r=e[10];r.begin&&r.begin();try{qr(t,e,t.template,n)}catch(i){throw function(t,e){const n=t[9],r=n?n.get(Zn,null):null;r&&r.handleError(e)}(e,i),i}finally{r.end&&r.end()}}function ai(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Kn(n),i=r[1];Br(i,r,i.template,n)}}(t[8])}function ui(t,e,n){Qt(0),e(t,n)}const ci=(()=>Promise.resolve(null))();function li(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=g(i,t):2==o&&(r=g(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const hi=new qe("INJECTOR",-1);class fi{get(t,e=ze){if(e===ze){const e=new Error(`NullInjectorError: No provider for ${m(t)}!`);throw e.name="NullInjectorError",e}return e}}const di=new qe("Set Injector scope."),pi={},yi={};let mi;function gi(){return void 0===mi&&(mi=new fi),mi}function vi(t,e=null,n=null,r){return new bi(t,n,e||gi(),r)}class bi{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Be(e,n=>this.processProvider(n,t,e)),Be([t],t=>this.processInjectorType(t,[],i)),this.records.set(hi,_i(void 0,this));const o=this.records.get(di);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:m(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=ze,n=O.Default){this.assertNotDestroyed();const r=Ze(this);try{if(!(n&O.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof qe)&&k(t);e=n&&this.injectableDefInScope(n)?_i(wi(t),pi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&O.Self?gi():this.parent).get(t,e=n&O.Optional&&e===ze?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(m(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[Je]&&i.unshift(e[Je]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=m(e);if(Array.isArray(e))i=e.map(m).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):m(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Ke,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{Ze(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(m(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=w(t)))return!1;let r=x(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=x(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{Be(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Be(r,t=>this.processProvider(t,n,r||K))}}this.injectorDefTypes.add(o);const a=bt(o)||(()=>new o);this.records.set(o,_i(a,pi));const u=r.providers;if(null!=u&&!s){const e=t;Be(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Ei(t=w(t))?t:w(t&&t.provide);const i=function(t,e,n){return Ti(t)?_i(void 0,t.useValue):_i(function(t,e,n){let r;if(Ei(t)){const e=w(t);return bt(e)||wi(e)}if(Ti(t))r=()=>w(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Xe(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Ye(w(t.useExisting));else{const e=w(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return bt(e)||wi(e);r=()=>new e(...Xe(t.deps))}var i;return r}(t),pi)}(t);if(Ei(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=_i(void 0,pi,!0),e.factory=()=>Xe(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===pi&&(e.value=yi,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=w(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function wi(t){const e=k(t),n=null!==e?e.factory:bt(t);if(null!==n)return n;if(t instanceof qe)throw new Error(`Token ${m(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${m(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[C]||t[D]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function _i(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Ti(t){return null!==t&&"object"==typeof t&&We in t}function Ei(t){return"function"==typeof t}const Ii=function(t,e,n){return function(t,e=null,n=null,r){const i=vi(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Si=(()=>{class t{static create(t,e){return Array.isArray(t)?Ii(t,e,""):Ii(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=ze,t.NULL=new fi,t.\u0275prov=I({token:t,providedIn:"any",factory:()=>Ye(hi)}),t.__NG_ELEMENT_ID__=-1,t})();function ki(t,e){oe(Kn(t)[1],qt())}let Ai=null;function xi(){if(!Ai){const t=H.Symbol;if(t&&t.iterator)Ai=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ai=n)}}}return Ai}function Ci(t){return!!Ni(t)&&(Array.isArray(t)||!(t instanceof Map)&&xi()in t)}function Ni(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Di(t,e=O.Default){const n=Ut();return null===n?Ye(t,e):Ne(qt(),n,w(t),e)}function Ri(t,e,n,r,i){const o=i?"class":"style";!function(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}(t,n,e.inputs[o],o,r)}function Oi(t,e,n,r){const i=Ut(),o=jt(),s=ft+t,a=i[11],u=i[s]=sr(a,e,Mt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Vr(e,t,2,i,Pt(a,o));return function(t,e,n,r){let i=!1;if(Vt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Rr(n,s.selectors,!1)&&(i||(i=[]),Ae(Ee(n,e),t,s.type),vt(s)?(Qr(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,$r(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Ur(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=ye(n.mergedAttrs,c.hostAttrs),Yr(t,n,e,u,c),Zr(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Ar(e)?null:ei(n,i);o.push(c),s=Kr(n,u,s),a=Kr(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new _("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}n.mergedAttrs=ye(n.mergedAttrs,n.attrs)}(e,n,u,Pt(a,s)),null!==u.attrs&&li(u,u.attrs,!1),null!==u.mergedAttrs&&li(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Gt(c,!0);const l=c.mergedAttrs;null!==l&&de(a,u,l);const h=c.classes;null!==h&&Er(a,u,h);const f=c.styles;null!==f&&Tr(a,u,f),64!=(64&c.flags)&&yr(o,i,u,c),0===Mt.lFrame.elementDepthCount&&zn(u,i),Mt.lFrame.elementDepthCount++,function(t){return 1==(1&t.flags)}(c)&&(function(t,e,n){Vt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ee(n,e),zn(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=vt(r);o&&Xr(e,n,r);const u=Pe(e,t,a,n);zn(u,e),null!==s&&ti(0,a-i,u,r,0,s),o&&(Rt(n.index,e)[8]=u)}}(t,e,n,Dt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Mt.lFrame.currentDirectiveIndex;try{ie(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Wt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Wr(r,i)}}finally{ie(-1),Wt(s)}}(t,e,n))}(o,i,c),function(t,e,n){if(mt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&function(t,e,n=Dt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}(i,c)}function Pi(){let t=qt();Ht()?Mt.lFrame.isParent=!1:(t=t.parent,Gt(t,!1));const e=t;Mt.lFrame.elementDepthCount--;const n=jt();n.firstCreatePass&&(oe(n,t),mt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ri(n,e,Ut(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ri(n,e,Ut(),e.stylesWithoutHost,!1)}function Li(t){return!!t&&"function"==typeof t.then}function Fi(t){return!!t&&"function"==typeof t.subscribe}const Mi=Fi;function Vi(t,e=""){const n=Ut(),r=jt(),i=t+ft,o=r.firstCreatePass?Vr(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return xt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);yr(r,n,s,o),Gt(o,!1)}const Ui=void 0;var ji=["en",[["a","p"],["AM","PM"],Ui],[["AM","PM"],Ui,Ui],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ui,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ui,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ui,"{1} 'at' {0}",Ui],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let qi={};function Bi(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Hi(e);if(n)return n;const r=e.split("-")[0];if(n=Hi(r),n)return n;if("en"===r)return ji;throw new Error(`Missing locale data for the locale "${t}".`)}function Gi(t){return Bi(t)[zi.PluralCase]}function Hi(t){return t in qi||(qi[t]=H.ng&&H.ng.common&&H.ng.common.locales&&H.ng.common.locales[t]),qi[t]}var zi=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Ki="en-US";let Ji=Ki;function Wi(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Ji=t.toLowerCase().replace(/_/g,"-"))}class Qi{}class Zi{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${m(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let $i=(()=>{class t{}return t.NULL=new Zi,t})();function Yi(...t){}function Xi(t,e){return new eo(Dt(t,e))}const to=function(){return Xi(qt(),Ut())};let eo=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=to,t})();class no{}let ro=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>io(),t})();const io=function(){const t=Ut(),e=Rt(qt().index,t);return function(t){return t[11]}(pt(e)?e:t)};let oo=(()=>{class t{}return t.\u0275prov=I({token:t,providedIn:"root",factory:()=>null}),t})();class so{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const ao=new so("12.0.5");class uo{constructor(){}supports(t){return Ci(t)}create(t){return new lo(t)}}const co=(t,e)=>e;class lo{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||co}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<yo(n,r,i)?e:n,s=yo(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ci(t))throw new Error(`Error trying to diff '${m(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[xi()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new ho(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new po),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new po),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ho{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fo{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class po{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new fo,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yo(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class mo{constructor(){}supports(t){return t instanceof Map||Ni(t)}create(){return new go}}class go{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Ni(t)))throw new Error(`Error trying to diff '${m(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new vo(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class vo{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function bo(){return new wo([new uo])}let wo=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||bo()),deps:[[t,new rn,new nn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=I({token:t,providedIn:"root",factory:bo}),t})();function _o(){return new To([new mo])}let To=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||_o()),deps:[[t,new rn,new nn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=I({token:t,providedIn:"root",factory:_o}),t})();function Eo(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Nt(o)),yt(o))for(let t=dt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Eo(e[1],e,n,r)}const s=n.type;if(8&s)Eo(t,e,n.child,r);else if(32&s){const t=tr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=gr(e,n);if(Array.isArray(t))r.push(...t);else{const n=er(e[16]);Eo(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Io{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Eo(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(yt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(ur(t,n),He(e,n))}this._attachedToViewContainer=!1}cr(this._lView[1],this._lView)}onDestroy(t){!function(t,e,n,r){const i=(o=e)[7]||(o[7]=[]);var o;i.push(r)}(0,this._lView,0,t)}markForCheck(){!function(t){for(;t;){t[2]|=64;const e=er(t);if(0!=(512&t[2])&&!e)return t;t=e}}(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){si(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Kt(!0);try{si(t,e,n)}finally{Kt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,wr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class So extends Io{constructor(t){super(t),this._view=t}detectChanges(){ai(this._view)}checkNoChanges(){!function(t){Kt(!0);try{ai(t)}finally{Kt(!1)}}(this._view)}get context(){return null}}const ko=function(t){return function(t,e,n){if(gt(t)&&!n){const n=Rt(t.index,e);return new Io(n,n)}return 47&t.type?new Io(e[16],e):null}(qt(),Ut(),16==(16&t))};let Ao=(()=>{class t{}return t.__NG_ELEMENT_ID__=ko,t})();const xo=[new mo],Co=new wo([new uo]),No=new To(xo),Do=function(){return t=qt(),e=Ut(),4&t.type?new Po(e,t,Xi(t,e)):null;var t,e};let Ro=(()=>{class t{}return t.__NG_ELEMENT_ID__=Do,t})();const Oo=Ro,Po=class extends Oo{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Mr(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),jr(e,n,t),new Io(n)}};class Lo{}const Fo=function(){return function(t,e){let n;const r=e[t.index];if(yt(r))n=r;else{let i;if(8&t.type)i=Nt(r);else{const n=e[11];i=n.createComment("");const r=Dt(t,e);hr(n,pr(n,r),i,function(t,e){return xt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=new Array(r,!0,!1,e,null,0,t,i,null,null),oi(e,n)}return new Uo(n,t,e)}(qt(),Ut())};let Mo=(()=>{class t{}return t.__NG_ELEMENT_ID__=Fo,t})();const Vo=Mo,Uo=class extends Vo{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Xi(this._hostTNode,this._hostLView)}get injector(){return new Me(this._hostTNode,this._hostLView)}get parentInjector(){const t=ke(this._hostTNode,this._hostLView);if(ge(t)){const e=be(t,this._hostLView),n=ve(t);return new Me(e[1].data[n+8],e)}return new Me(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=jo(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-dt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Lo,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(yt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Uo(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=dt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-dt?(e[4]=n[i],Ge(n,dt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=vr(i,o),a=n[11],u=pr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,wr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),Ge(qo(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=jo(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=ur(this._lContainer,e);n&&(He(qo(this._lContainer),e),cr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=ur(this._lContainer,e);return n&&null!=He(qo(this._lContainer),e)?new Io(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function jo(t){return t[8]}function qo(t){return t[8]||(t[8]=[])}const Bo={};class Go extends $i{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=lt(t);return new Ko(e,this.ngModule)}}function Ho(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const zo=new qe("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>$n});class Ko extends Qi{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Pr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ho(this.componentDef.inputs)}get outputs(){return Ho(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Bo,i);return o!==Bo||r===Bo?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(no,Ct),s=i.get(oo,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(xt(t))return t.selectRootElement(e,n===U.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):sr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:$n,clean:ci,playerHandler:null,flags:0},f=zr(0,null,null,1,0,null,null,null,null,null),d=Mr(null,f,h,l,null,null,o,a,s,i);let p,y;Yt(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Vr(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(li(a,u,!0),null!==t&&(de(i,t,u),null!==a.classes&&Er(i,t,a.classes),null!==a.styles&&Tr(i,t,a.styles)));const c=r.createRenderer(t,e),l=Mr(n,Hr(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Ae(Ee(a,n),s,e.type),Qr(s,a),$r(a,n.length,1)),oi(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)de(a,c,["ng-version",ao.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Nr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&de(a,c,t),e&&e.length>0&&Er(a,c,e.join(" "))}if(y=f.data[20],void 0!==e){const t=y.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=qt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Yr(t,r,e,Ur(t,e,1,null),n));const i=Pe(e,t,r.directiveStart,r);zn(i,e);const o=Dt(r,e);return o&&zn(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=qt();e.contentQueries(1,s,t.directiveStart)}const a=qt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ie(a.index),Jr(n[1],a,0,a.directiveStart,a.directiveEnd,e),Wr(e,s)),s}(t,this.componentDef,d,h,[ki]),jr(f,d,null)}finally{re()}return new Jo(this.componentType,p,Xi(y,d),d,y)}}class Jo extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new So(r),this.componentType=t}get injector(){return new Me(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Wo=new Map;class Qo extends Lo{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Go(this);const n=ht(t),r=t[$]||null;r&&Wi(r),this._bootstrapComponents=Yn(n.bootstrap),this._r3Injector=vi(t,e,[{provide:Lo,useValue:this},{provide:$i,useValue:this.componentFactoryResolver}],m(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Si.THROW_IF_NOT_FOUND,n=O.Default){return t===Si||t===Lo||t===hi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Zo extends class{}{constructor(t){super(),this.moduleType=t,null!==ht(t)&&function(t){const e=new Set;!function t(n){const r=ht(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${m(e)} vs ${m(e.name)}`)}(i,Wo.get(i),n),Wo.set(i,n));const o=Yn(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Qo(this.moduleType,t)}}function $o(t){return e=>{setTimeout(t,void 0,e)}}const Yo=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=$o(u),a&&(a=$o(a)),c&&(c=$o(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}},Xo=new qe("Application Initializer");let ts=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Yi,this.reject=Yi,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(Li(e))t.push(e);else if(Mi(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Ye(Xo,8))},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t})();const es=new qe("AppId"),ns={provide:es,useFactory:function(){return`${rs()}${rs()}${rs()}`},deps:[]};function rs(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const is=new qe("Platform Initializer"),os=new qe("Platform ID"),ss=new qe("appBootstrapListener");let as=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t})();const us=new qe("LocaleId"),cs=new qe("DefaultCurrencyCode");class ls{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const hs=function(t){return new Zo(t)},fs=hs,ds=function(t){return Promise.resolve(hs(t))},ps=function(t){const e=hs(t),n=Yn(ht(t).declarations).reduce((t,e)=>{const n=lt(e);return n&&t.push(new Ko(n)),t},[]);return new ls(e,n)},ys=ps,ms=function(t){return Promise.resolve(ps(t))};let gs=(()=>{class t{constructor(){this.compileModuleSync=fs,this.compileModuleAsync=ds,this.compileModuleAndAllComponentsSync=ys,this.compileModuleAndAllComponentsAsync=ms}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t})();const vs=(()=>Promise.resolve(0))();function bs(t){"undefined"==typeof Zone?vs.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class ws{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Yo(!1),this.onMicrotaskEmpty=new Yo(!1),this.onStable=new Yo(!1),this.onError=new Yo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=H.requestAnimationFrame,e=H.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(H,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Es(t),t.isCheckStableRunning=!0,Ts(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Es(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Is(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Ss(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Is(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Ss(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Es(t),Ts(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ws.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ws.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,_s,Yi,Yi);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const _s={};function Ts(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Es(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Is(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ss(t){t._nesting--,Ts(t)}class ks{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Yo,this.onMicrotaskEmpty=new Yo,this.onStable=new Yo,this.onError=new Yo}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let As=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ws.assertNotInAngularZone(),bs(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())bs(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Ye(ws))},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t})(),xs=(()=>{class t{constructor(){this._applications=new Map,Rs.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Rs.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t})();class Cs{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Ns(t){Rs=t}let Ds,Rs=new Cs,Os=!0,Ps=!1;function Ls(){return Ps=!0,Os}function Fs(){if(Ps)throw new Error("Cannot enable prod mode after platform setup.");Os=!1}const Ms=new qe("AllowMultipleToken");class Vs{constructor(t,e){this.name=t,this.token=e}}function Us(t,e,n=[]){const r=`Platform: ${e}`,i=new qe(r);return(e=[])=>{let o=js();if(!o||o.injector.get(Ms,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:di,useValue:"platform"});!function(t){if(Ds&&!Ds.destroyed&&!Ds.injector.get(Ms,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ds=t.get(qs);const e=t.get(is,null);e&&e.forEach(t=>t())}(Si.create({providers:t,name:r}))}return function(t){const e=js();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function js(){return Ds&&!Ds.destroyed?Ds:null}let qs=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new ks:("zone.js"===t?void 0:t)||new ws({enableLongStackTrace:Ls(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:ws,useValue:n}];return n.run(()=>{const e=Si.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(Zn,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Hs(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Li(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(ts);return t.runInitializers(),t.donePromise.then(()=>(Wi(i.injector.get(us,Ki)||Ki),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Bs({},e);return function(t,e,n){const r=new Zo(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Gs);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${m(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Ye(Si))},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t})();function Bs(t,e){return Array.isArray(e)?e.reduce(Bs,t):Object.assign(Object.assign({},t),e)}let Gs=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new o.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{ws.assertNotInAngularZone(),bs(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{ws.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,s.T)(a,c.pipe(t=>{return u()((e=p,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,f);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Qi?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Lo),i=n.create(Si.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(As,null),a=s&&i.injector.get(xs);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Hs(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Hs(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(ss,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Ye(ws),Ye(Si),Ye(Zn),Ye($i),Ye(ts))},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t})();function Hs(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const zs=function(t){return null},Ks=Us(null,"core",[{provide:os,useValue:"unknown"},{provide:qs,deps:[Si]},{provide:xs,deps:[]},{provide:as,deps:[]}]),Js=[{provide:Gs,useClass:Gs,deps:[ws,Si,Zn,$i,ts]},{provide:zo,deps:[ws],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ts,useClass:ts,deps:[[new nn,Xo]]},{provide:gs,useClass:gs,deps:[]},ns,{provide:wo,useFactory:function(){return Co},deps:[]},{provide:To,useFactory:function(){return No},deps:[]},{provide:us,useFactory:function(t){return Wi(t=t||"undefined"!=typeof $localize&&$localize.locale||Ki),t},deps:[[new en(us),new nn,new rn]]},{provide:cs,useValue:"USD"}];let Ws=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(Ye(Gs))},t.\u0275mod=ot({type:t}),t.\u0275inj=S({providers:Js}),t})()},120:(t,e,n)=>{"use strict";n.d(e,{hO:()=>N,xv:()=>E,Dh:()=>T,HU:()=>g,GT:()=>_,sI:()=>x,on:()=>S,ss:()=>v,pX:()=>w,yq:()=>k});var r=n(489),i=n(569),o=n(673);function s(){}var a=n(24);class u{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new c(t,this.nextOrObserver,this.error,this.complete))}}class c extends o.L{constructor(t,e,n,r){super(t),this._tapNext=s,this._tapError=s,this._tapComplete=s,this._tapError=n||s,this._tapComplete=r||s,(0,a.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||s,this._tapError=e.error||s,this._tapComplete=e.complete||s)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}var l=n(187),h=n(115),f=n(25),d=n(858);function p(){}t=n.hmd(t);class y{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class m{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",p,{},p,p)),e.pipe((r={next:n,complete:n,error:n},function(t){return t.lift(new u(r,void 0,void 0))})).subscribe(t).add(n);var r}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class g{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new y(Zone.current)),this.insideAngular=t.run(()=>new y(Zone.current,i.z))}}function v(t){return function(e){return(e=e.lift(new m(t.ngZone))).pipe((0,l.R)(t.outsideAngular),(0,h.QV)(t.insideAngular))}}const b=["ngOnDestroy"],w=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(b.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),_=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},T=new f.OlP("angularfire2.app.options"),E=new f.OlP("angularfire2.app.nameOrConfig"),I=new f.GfV("6.1.5");function S(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=d.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>d.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&A("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const k=()=>{A("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},A=(t,...e)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function x(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&A("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const C={provide:class{},useFactory:S,deps:[T,f.R0b,[new f.FiY,E]]};let N=(()=>{class t{constructor(t){d.Z.registerVersion("angularfire",I.full,t.toString()),d.Z.registerVersion("angular",f.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:T,useValue:e},{provide:E,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(f.LFG(f.Lbi))},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({providers:[C]}),t})()},62:(t,e,n)=>{"use strict";n.d(e,{Z:()=>_});var r,i,o=n(762),s=n(250),a=n(119),u=n(308),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.LL("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),y=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();y.prototype.name&&y.prototype.options||y.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,s.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.6.7",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,s.r3)(e,t=t||f))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&(0,s.ZB)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(y);return e.INTERNAL=(0,o.pi)((0,o.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,s.ZB)(e,t)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),e}(),g=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,s.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new g(t)},"PRIVATE")),t.registerVersion(h,"0.6.26",void 0),t.registerVersion("fire-js","")}(w);const _=w},119:(t,e,n)=>{"use strict";n.d(e,{wA:()=>o,H0:()=>u});var r=n(762),i=n(250),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=(0,r.CR)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];s===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(f){e={error:f}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(a,s),a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.has(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var s=(0,r.XA)(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=s),this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},308:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,{in:()=>s,Yd:()=>h,Ub:()=>f,Am:()=>d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},250:(t,e,n)=>{"use strict";n.d(e,{BH:()=>a,LL:()=>b,ZR:()=>v,r3:()=>T,Sg:()=>u,ne:()=>E,p$:()=>o,ZB:()=>s,m9:()=>k,z$:()=>c,jU:()=>f,ru:()=>d,d:()=>y,w1:()=>m,uI:()=>l,UG:()=>h,b$:()=>p,Mn:()=>g});var r=n(762),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function o(t){return s(void 0,t)}function s(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=s(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",o=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function f(){return"object"==typeof self&&self.self===self}function d(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function y(){return c().indexOf("Electron/")>=0}function m(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function g(){return c().indexOf("MSAppHost/")>=0}var v=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,b.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),b=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?w(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new v(i,a,r);return u},t}();function w(t,e){return t.replace(_,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var _=/\{\$([^}]+)}/g;function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function E(t,e){var n=new I(t,e);return n.subscribe.bind(n)}var I=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function S(){}function k(t){return t&&t._delegate?t._delegate:t}},858:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(62),i="8.6.7";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},318:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(673),i=n(331),o=n(498),s=n(197),a=n(392),u=n(484);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(o.c)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},498:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var r=n(484),i=n(294);const o={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},959:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(318),i=n(673),o=n(570),s=n(895),a=n(291),u=n(331);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.N;return this.hasError?(t.error(this.thrownError),o.w.EMPTY):this.isStopped?(t.complete(),o.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.w.EMPTY}}},291:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(570);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},673:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(24),i=n(498),o=n(570),s=n(331),a=n(484),u=n(294);class c extends o.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},570:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(470),i=n(56),o=n(24);const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if((0,o.m)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if((0,r.k)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if((0,i.K)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},484:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},882:(t,e,n)=>{"use strict";n.d(e,{IY:()=>s,Ds:()=>a,ft:()=>u});var r=n(673),i=n(318),o=n(15);class s extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,o.s)(t)(e)}catch(r){e.error(r)}return n}},75:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var r=n(318);const i=new r.y(t=>t.complete());function o(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},764:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(318),i=n(15),o=n(570),s=n(197),a=n(790),u=n(686),c=n(168),l=n(653);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.L]}(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>{const i=t[s.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new o.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},342:(t,e,n)=>{"use strict";n.d(e,{n:()=>s});var r=n(318),i=n(625),o=n(790);function s(t,e){return e?(0,o.r)(t,e):new r.y((0,i.V)(t))}},906:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(318),i=n(163),o=n(109),s=n(342);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,o.J)(e)((0,s.n)(t,n))}},878:(t,e,n)=>{"use strict";n.d(e,{of:()=>s});var r=n(163),i=n(342),o=n(790);function s(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,o.r)(t,e)):(0,i.n)(t)}},996:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(673);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},109:(t,e,n)=>{"use strict";n.d(e,{J:()=>l});var r=n(996),i=n(764),o=n(882);function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>(0,i.D)(t(n,o)).pipe((0,r.U)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.IY(this),n=this.destination;n.add(e);const r=(0,o.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}var c=n(392);function l(t=Number.POSITIVE_INFINITY){return s(c.y,t)}},115:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(673),i=n(75),o=n(878),s=n(318);let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,o.of)(this.value);case"E":return t=this.error,new s.y(e=>e.error(t));case"C":return(0,i.c)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},187:(t,e,n)=>{"use strict";n.d(e,{R:()=>m});var r=n(318);let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(277);class l extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n(98);class f extends h.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n(470);class y extends r.y{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,((0,p.k)(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new y(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(y.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new g(t,e))}}class g{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new y(e,this.delay,this.scheduler).subscribe(t)}}},790:(t,e,n)=>{"use strict";n.d(e,{r:()=>o});var r=n(318),i=n(570);function o(t,e){return new r.y(n=>{const r=new i.w;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},277:(t,e,n)=>{"use strict";n.d(e,{o:()=>o});var r=n(570);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},98:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},569:(t,e,n)=>{"use strict";n.d(e,{z:()=>i,P:()=>o});var r=n(277);const i=new(n(98).v)(r.o),o=i},489:(t,e,n)=>{"use strict";n.d(e,{c:()=>u,N:()=>a});var r=n(277);class i extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n(98);class s extends o.v{}const a=new s(i),u=a},686:(t,e,n)=>{"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,{hZ:()=>i});const i=r()},197:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},331:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},895:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},294:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},392:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},470:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},653:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},24:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},56:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},168:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},163:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},15:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(625),i=n(294),o=n(686),s=n(197),a=n(653),u=n(168),c=n(56);const l=t=>{if(t&&"function"==typeof t[s.L])return l=t,t=>{const e=l[s.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[o.hZ])return e=t,t=>{const n=e[o.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},625:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},793:(t,e,n)=>{"use strict";var r=n(25);let i=null;function o(){return i}const s=new r.OlP("DocumentToken");var a=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const u=r.kL8;class c{}let l=(()=>{class t extends c{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(u(e||this.locale)(t)){case a.Zero:return"zero";case a.One:return"one";case a.Two:return"two";case a.Few:return"few";case a.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),h=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:c,useClass:l}]}),t})();function f(t){return"server"===t}class d extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new d,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(y=y||document.querySelector("base"),y?y.getAttribute("href"):null);return null==e?null:function(t){p=p||document.createElement("a"),p.setAttribute("href",t);const e=p.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){y=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let p,y=null;const m=new r.OlP("TRANSITION_ID"),g=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[m,s,r.zs3],multi:!0}];class v{static init(){(0,r.VLi)(new v)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let b=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const w=new r.OlP("EventManagerPlugins");let _=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(w),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class T{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let E=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),I=(()=>{class t extends E{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(S),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(S))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function S(t){o().remove(t)}const k={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},A=/%COMP%/g;function x(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?x(t,i,n):(i=i.replace(A,t),n.push(i))}return n}function C(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let N=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new D(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new R(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new O(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=x(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(_),r.LFG(I),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class D{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(k[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=k[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=k[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,C(n)):this.eventManager.addEventListener(t,e,C(n))}}class R extends D{constructor(t,e,n,r){super(t),this.component=n;const i=x(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(A,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(A,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class O extends D{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=x(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let P=(()=>{class t extends T{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const L=["alt","control","meta","shift"],F={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},M={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},V={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let U=(()=>{class t extends T{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(L.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&M.hasOwnProperty(e)&&(e=M[e]))}return F[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),L.forEach(r=>{r!=n&&(0,V[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const j=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){d.makeCurrent(),v.init()},multi:!0},{provide:s,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),q=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:w,useClass:P,multi:!0,deps:[s,r.R0b,r.Lbi]},{provide:w,useClass:U,multi:!0,deps:[s]},[],{provide:N,useClass:N,deps:[_,I,r.AFp]},{provide:r.FYo,useExisting:N},{provide:E,useExisting:I},{provide:I,useClass:I,deps:[s]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:_,useClass:_,deps:[w,r.R0b]},{provide:class{},useClass:b,deps:[]},[]];let B=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:m,useExisting:r.AFp},g]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:q,imports:[h,r.hGG]}),t})();"undefined"!=typeof window&&window;var G=n(120),H=n(569),z=n(318),K=n(764),J=n(878),W=n(109);function Q(...t){return(0,W.J)(1)((0,J.of)(...t))}var Z=n(163);function $(...t){const e=t[t.length-1];return(0,Z.K)(e)?(t.pop(),n=>Q(t,n,e)):e=>Q(t,e)}var Y=n(673);function X(){return t=>t.lift(new tt)}class tt{call(t,e){return e.subscribe(new et(t))}}class et extends Y.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var nt=n(996);function rt(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new it(t,e,n))}}class it{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new ot(t,this.accumulator,this.seed,this.hasSeed))}}class ot extends Y.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}class st{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new at(t,this.compare,this.keySelector))}}class at extends Y.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function ut(t,e){return function(n){return n.lift(new ct(t,e))}}class ct{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new lt(t,this.predicate,this.thisArg))}}class lt extends Y.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}var ht=n(115),ft=n(858),dt=n(62),pt=n(250),yt=n(308),mt=function(t,e){return(mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function gt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var vt,bt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},wt=wt||{},_t=bt||self;function Tt(){}function Et(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function It(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var St="closure_uid_"+(1e9*Math.random()>>>0),kt=0;function At(t,e,n){return t.call.apply(t.bind,arguments)}function xt(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ct(t,e,n){return(Ct=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?At:xt).apply(null,arguments)}function Nt(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Dt(){return Date.now()}function Rt(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Pb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Ot(){this.j=this.j,this.i=this.i}Ot.prototype.j=!1,Ot.prototype.ka=function(){!this.j&&(this.j=!0,this.H(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,St)&&t[St]||(t[St]=++kt)}(this)},Ot.prototype.H=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Pt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Lt=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Ft(t){return Array.prototype.concat.apply([],arguments)}function Mt(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Vt(t){return/^[\s\xa0]*$/.test(t)}var Ut,jt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function qt(t,e){return-1!=t.indexOf(e)}function Bt(t,e){return t<e?-1:t>e?1:0}t:{var Gt=_t.navigator;if(Gt){var Ht=Gt.userAgent;if(Ht){Ut=Ht;break t}}Ut=""}function zt(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Kt(t){var e={};for(var n in t)e[n]=t[n];return e}var Jt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Jt.length;o++)n=Jt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Qt(t){return Qt[" "](t),t}Qt[" "]=Tt;var Zt,$t,Yt=qt(Ut,"Opera"),Xt=qt(Ut,"Trident")||qt(Ut,"MSIE"),te=qt(Ut,"Edge"),ee=te||Xt,ne=qt(Ut,"Gecko")&&!(qt(Ut.toLowerCase(),"webkit")&&!qt(Ut,"Edge"))&&!(qt(Ut,"Trident")||qt(Ut,"MSIE"))&&!qt(Ut,"Edge"),re=qt(Ut.toLowerCase(),"webkit")&&!qt(Ut,"Edge");function ie(){var t=_t.document;return t?t.documentMode:void 0}t:{var oe="",se=($t=Ut,ne?/rv:([^\);]+)(\)|;)/.exec($t):te?/Edge\/([\d\.]+)/.exec($t):Xt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec($t):re?/WebKit\/(\S+)/.exec($t):Yt?/(?:Version)[ \/]?(\S+)/.exec($t):void 0);if(se&&(oe=se?se[1]:""),Xt){var ae=ie();if(null!=ae&&ae>parseFloat(oe)){Zt=String(ae);break t}}Zt=oe}var ue={};function ce(t){return function(t,e){var n=ue;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=jt(String(Zt)).split("."),r=jt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Bt(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Bt(0==s[2].length,0==a[2].length)||Bt(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var le=_t.document&&Xt&&(ie()||parseInt(Zt,10))||void 0,he=!Xt||9<=Number(le),fe=Xt&&!ce("9"),de=function(){if(!_t.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{_t.addEventListener("test",Tt,e),_t.removeEventListener("test",Tt,e)}catch(n){}return t}();function pe(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function ye(t,e){if(pe.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ne){t:{try{Qt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:me[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}pe.prototype.b=function(){this.defaultPrevented=!0},Rt(ye,pe);var me={2:"touch",3:"pen",4:"mouse"};ye.prototype.b=function(){ye.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,fe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ge="closure_listenable_"+(1e6*Math.random()|0),ve=0;function be(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++ve,this.Y=this.Z=!1}function we(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function _e(t){this.src=t,this.a={},this.b=0}function Te(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Pt(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(we(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Ee(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}_e.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Ee(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new be(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Ie="closure_lm_"+(1e6*Math.random()|0),Se={};function ke(t,e,n,r,i){if(r&&r.once)return xe(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ke(t,e[o],n,r,i);return null}return n=Fe(n),t&&t[ge]?t.wa(e,n,It(r)?!!r.capture:!!r,i):Ae(t,e,n,!1,r,i)}function Ae(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=It(i)?!!i.capture:!!i;if(s&&!he)return null;var a=Pe(t);if(a||(t[Ie]=a=new _e(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Oe,e=he?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)de||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(De(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function xe(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)xe(t,e[o],n,r,i);return null}return n=Fe(n),t&&t[ge]?t.xa(e,n,It(r)?!!r.capture:!!r,i):Ae(t,e,n,!0,r,i)}function Ce(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ce(t,e[o],n,r,i);else r=It(r)?!!r.capture:!!r,n=Fe(n),t&&t[ge]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Ee(o=t.a[e],n,r,i))&&(we(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Pe(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Ee(e,n,r,i)),(n=-1<t?e[t]:null)&&Ne(n))}function Ne(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ge])Te(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(De(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Pe(e))?(Te(n,t),0==n.b&&(n.src=null,e[Ie]=null)):we(t)}}}function De(t){return t in Se?Se[t]:Se[t]="on"+t}function Re(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&Ne(t),n.call(r,e)}function Oe(t,e){if(t.Y)return!0;if(!he){if(!e)t:{e=["window","event"];for(var n=_t,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Re(t,e=new ye(e,this))}return Re(t,new ye(e,this))}function Pe(t){return(t=t[Ie])instanceof _e?t:null}var Le="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fe(t){return"function"==typeof t?t:(t[Le]||(t[Le]=function(e){return t.handleEvent(e)}),t[Le])}function Me(){Ot.call(this),this.c=new _e(this),this.J=this,this.D=null}function Ve(t,e){var n,r=t.D;if(r)for(n=[];r;r=r.D)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new pe(e,t);else if(e instanceof pe)e.target=e.target||t;else{var i=e;Wt(e=new pe(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Ue(s,r,!0,e)&&i}if(i=Ue(s=e.a=t,r,!0,e)&&i,i=Ue(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ue(s=e.a=n[o],r,!1,e)&&i}function Ue(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.da||s.src;s.Z&&Te(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Rt(Me,Ot),Me.prototype[ge]=!0,(vt=Me.prototype).addEventListener=function(t,e,n,r){ke(this,t,e,n,r)},vt.removeEventListener=function(t,e,n,r){Ce(this,t,e,n,r)},vt.H=function(){if(Me.X.H.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)we(n[r]);delete e.a[t],e.b--}}this.D=null},vt.wa=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},vt.xa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var je=_t.JSON.stringify;function qe(){this.b=this.a=null}var Be,Ge=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new ze},function(t){t.reset()});function He(){var t=Qe,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ze(){this.next=this.b=this.a=null}function Ke(t){_t.setTimeout(function(){throw t},0)}function Je(t,e){Be||function(){var t=_t.Promise.resolve(void 0);Be=function(){t.then(Ze)}}(),We||(Be(),We=!0),Qe.add(t,e)}qe.prototype.add=function(t,e){var n=Ge.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ze.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ze.prototype.reset=function(){this.next=this.b=this.a=null};var We=!1,Qe=new qe;function Ze(){for(var t;t=He();){try{t.a.call(t.b)}catch(n){Ke(n)}var e=Ge;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}We=!1}function $e(t,e){Me.call(this),this.b=t||1,this.a=e||_t,this.f=Ct(this.eb,this),this.g=Dt()}function Ye(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Xe(t,e,n){if("function"==typeof t)n&&(t=Ct(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ct(t.handleEvent,t)}return 2147483647<Number(e)?-1:_t.setTimeout(t,e||0)}function tn(t){t.a=Xe(function(){t.a=null,t.c&&(t.c=!1,tn(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Rt($e,Me),(vt=$e.prototype).aa=!1,vt.M=null,vt.eb=function(){if(this.aa){var t=Dt()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Ve(this,"tick"),this.aa&&(Ye(this),this.start()))}},vt.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Dt())},vt.H=function(){$e.X.H.call(this),Ye(this),delete this.a};var en=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}mt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:tn(this)},e.prototype.H=function(){t.prototype.H.call(this),this.a&&(_t.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Ot);function nn(t){Ot.call(this),this.b=t,this.a={}}Rt(nn,Ot);var rn=[];function on(t,e,n,r){Array.isArray(n)||(n&&(rn[0]=n.toString()),n=rn);for(var i=0;i<n.length;i++){var o=ke(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function sn(t){zt(t.a,function(t,e){this.a.hasOwnProperty(e)&&Ne(t)},t),t.a={}}function an(){this.a=!0}function un(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return je(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}nn.prototype.H=function(){nn.X.H.call(this),sn(this)},nn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},an.prototype.info=function(){};var cn={},ln=null;function hn(){return ln=ln||new Me}function fn(t){pe.call(this,cn.Ga,t)}function dn(t){var e=hn();Ve(e,new fn(e,t))}function pn(t,e){pe.call(this,cn.STAT_EVENT,t),this.stat=e}function yn(t){var e=hn();Ve(e,new pn(e,t))}function mn(t){pe.call(this,cn.Ha,t)}function gn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return _t.setTimeout(function(){t()},e)}cn.Ga="serverreachability",Rt(fn,pe),cn.STAT_EVENT="statevent",Rt(pn,pe),cn.Ha="timingevent",Rt(mn,pe);var vn={NO_ERROR:0,fb:1,sb:2,rb:3,mb:4,qb:5,tb:6,Ea:7,TIMEOUT:8,wb:9},bn={kb:"complete",Gb:"success",Fa:"error",Ea:"abort",yb:"ready",zb:"readystatechange",TIMEOUT:"timeout",ub:"incrementaldata",xb:"progress",nb:"downloadprogress",Ob:"uploadprogress"};function wn(){}function _n(){}wn.prototype.b=null;var Tn,En={OPEN:"a",jb:"b",Fa:"c",vb:"d"};function In(){pe.call(this,"d")}function Sn(){pe.call(this,"c")}function kn(){}function An(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new nn(this),this.P=xn,this.R=new $e(t=ee?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.G=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Rt(In,pe),Rt(Sn,pe),Rt(kn,wn),kn.prototype.a=function(){return new XMLHttpRequest},kn.prototype.c=function(){return{}},Tn=new kn;var xn=45e3,Cn={},Nn={};function Dn(t,e,n){t.G=1,t.i=Xn(Jn(e)),t.j=n,t.I=!0,Rn(t,null)}function Rn(t,e){t.u=Dt(),Ln(t),t.l=Jn(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),fr(n.b,"t",r),t.D=0,t.a=si(t.g,t.g.C?e:null),0<t.O&&(t.F=new en(Ct(t.Da,t,t.a),t.O)),on(t.J,t.a,"readystatechange",t.bb),e=t.B?Kt(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),dn(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function On(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Pn(t,n);if(i==Nn){4==e&&(t.h=4,yn(14),r=!1),un(t.c,t.f,null,"[Incomplete Response]");break}if(i==Cn){t.h=4,yn(15),un(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}un(t.c,t.f,i,null),jn(t,i)}4==e&&0==n.length&&(t.h=1,yn(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Yr(e),e.F=!0,yn(11))):(un(t.c,t.f,n,"[Invalid Chunked Response]"),Un(t),Vn(t))}function Pn(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Nn:(n=Number(e.substring(n,r)),isNaN(n)?Cn:(r+=1)+n>e.length?Nn:(e=e.substr(r,n),t.D=r+n,e))}function Ln(t){t.T=Dt()+t.P,Fn(t,t.P)}function Fn(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=gn(Ct(t.$a,t),e)}function Mn(t){t.o&&(_t.clearTimeout(t.o),t.o=null)}function Vn(t){0==t.g.v||t.A||ei(t.g,t)}function Un(t){Mn(t);var e=t.F;e&&"function"==typeof e.ka&&e.ka(),t.F=null,Ye(t.R),sn(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ka())}function jn(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||br(n.b,t)))if(n.I=t.N,!t.C&&br(n.b,t)&&3==n.v){try{var r=n.la.a.parse(e)}catch(lp){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;ti(n),Gr(n)}$r(n),yn(18)}}else n.pa=i[1],0<n.pa-n.P&&37500>i[2]&&n.G&&0==n.o&&!n.m&&(n.m=gn(Ct(n.Xa,n),6e3));if(1>=vr(n.b)&&n.fa){try{n.fa()}catch(lp){}n.fa=void 0}}else ri(n,11)}else if((t.C||n.a==t)&&ti(n),!Vt(e))for(e=r=n.la.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ha=i[2];var o=i[3];null!=o&&(n.ia=o,n.c.info("VER="+n.ia));var s=i[4];null!=s&&(n.qa=s,n.c.info("SVER="+n.qa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(qt(l,"spdy")||qt(l,"quic")||qt(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(wr(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.oa=f,Yn(u.B,u.A,f))}}n.v=3,n.f&&n.f.ua(),n.U&&(n.N=Dt()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).ma=oi(u,u.C?u.ha:null,u.ga),d.C){_r(u.b,d);var p=d,y=u.D;y&&p.setTimeout(y),p.o&&(Mn(p),Ln(p)),u.a=d}else Zr(u);0<n.g.length&&Kr(n)}else"stop"!=i[0]&&"close"!=i[0]||ri(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?ri(n,7):Br(n):"noop"!=i[0]&&n.f&&n.f.ta(i),n.o=0);dn(4)}catch(lp){}}function qn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Et(t)||"string"==typeof t)Lt(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Et(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Et(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Bn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Bn)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Gn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Hn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Hn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Hn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(vt=An.prototype).setTimeout=function(t){this.P=t},vt.bb=function(t){t=t.target;var e=this.F;e&&3==Vr(t)?e.f():this.Da(t)},vt.Da=function(t){try{if(t==this.a)t:{var e=Vr(this.a),n=this.a.va(),r=this.a.W();if(!(3>e||3==e&&!ee&&!this.a.$())){this.A||4!=e||7==n||dn(8==n||0>=r?3:2),Mn(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vt(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,yn(12),Un(this),Vn(this);break t}un(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,jn(this,u)}this.I?(On(this,e,o),ee&&this.b&&3==e&&(on(this.J,this.R,"tick",this.ab),this.R.start())):(un(this.c,this.f,o,null),jn(this,o)),4==e&&Un(this),this.b&&!this.A&&(4==e?ei(this.g,this):(this.b=!1,Ln(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,yn(12)):(this.h=0,yn(13)),Un(this),Vn(this)}}}catch(c){}},vt.ab=function(){if(this.a){var t=Vr(this.a),e=this.a.$();this.D<e.length&&(Mn(this),On(this,t,e),this.b&&4!=t&&Ln(this))}},vt.cancel=function(){this.A=!0,Un(this)},vt.$a=function(){this.o=null;var t=Dt();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.G&&(dn(3),yn(17)),Un(this),this.h=2,Vn(this)):Fn(this,this.T-t)},(vt=Bn.prototype).K=function(){Gn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},vt.L=function(){return Gn(this),this.a.concat()},vt.get=function(t,e){return Hn(this.b,t)?this.b[t]:e},vt.set=function(t,e){Hn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},vt.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var zn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Kn(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Kn){this.a=void 0!==e?e:t.a,Wn(this,t.f),this.j=t.j,Qn(this,t.c),Zn(this,t.h),this.g=t.g,e=t.b;var n=new ur;n.c=e.c,e.a&&(n.a=new Bn(e.a),n.b=e.b),$n(this,n),this.i=t.i}else t&&(n=String(t).match(zn))?(this.a=!!e,Wn(this,n[1]||"",!0),this.j=tr(n[2]||""),Qn(this,n[3]||"",!0),Zn(this,n[4]),this.g=tr(n[5]||"",!0),$n(this,n[6]||"",!0),this.i=tr(n[7]||"")):(this.a=!!e,this.b=new ur(null,this.a))}function Jn(t){return new Kn(t)}function Wn(t,e,n){t.f=n?tr(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Qn(t,e,n){t.c=n?tr(e,!0):e}function Zn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function $n(t,e,n){e instanceof ur?(t.b=e,function(t,e){e&&!t.f&&(cr(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(lr(this,e),fr(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=er(e,sr)),t.b=new ur(e,t.a))}function Yn(t,e,n){t.b.set(e,n)}function Xn(t){return Yn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Dt()).toString(36)),t}function tr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function er(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,nr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function nr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Kn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(er(e,rr,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(er(e,rr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(er(n,"/"==n.charAt(0)?or:ir,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",er(n,ar)),t.join("")};var rr=/[#\/\?@]/g,ir=/[#\?:]/g,or=/[#\?]/g,sr=/[#\?@]/g,ar=/#/g;function ur(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function cr(t){t.a||(t.a=new Bn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function lr(t,e){cr(t),e=dr(t,e),Hn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Hn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Gn(t)))}function hr(t,e){return cr(t),e=dr(t,e),Hn(t.a.b,e)}function fr(t,e,n){lr(t,e),0<n.length&&(t.c=null,t.a.set(dr(t,e),Mt(n)),t.b+=n.length)}function dr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(vt=ur.prototype).add=function(t,e){cr(this),this.c=null,t=dr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},vt.forEach=function(t,e){cr(this),this.a.forEach(function(n,r){Lt(n,function(n){t.call(e,n,r,this)},this)},this)},vt.L=function(){cr(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},vt.K=function(t){cr(this);var e=[];if("string"==typeof t)hr(this,t)&&(e=Ft(e,this.a.get(dr(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Ft(e,t[n])}return e},vt.set=function(t,e){return cr(this),this.c=null,hr(this,t=dr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},vt.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},vt.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var pr=function(){return function(t,e){this.b=t,this.a=e}}();function yr(t){this.g=t||mr,t=_t.PerformanceNavigationTiming?0<(t=_t.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(_t.ja&&_t.ja.za&&_t.ja.za()&&_t.ja.za().Qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var mr=10;function gr(t){return!!t.b||!!t.a&&t.a.size>=t.f}function vr(t){return t.b?1:t.a?t.a.size:0}function br(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function wr(t,e){t.a?t.a.add(e):t.b=e}function _r(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Tr(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=gt(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Mt(t.c)}function Er(){}function Ir(){this.a=new Er}function Sr(t,e,n){var r=n||"";try{qn(t,function(t,n){var i=t;It(t)&&(i=je(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Pp){throw e.push(r+"type="+encodeURIComponent("_badmap")),Pp}}function kr(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}yr.prototype.cancel=function(){var t,e;if(this.c=Tr(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=gt(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Er.prototype.stringify=function(t){return _t.JSON.stringify(t,void 0)},Er.prototype.parse=function(t){return _t.JSON.parse(t,void 0)};var Ar=_t.JSON.parse;function xr(t){Me.call(this),this.headers=new Bn,this.l=t||null,this.b=!1,this.u=this.a=null,this.C="",this.h=0,this.f="",this.g=this.B=this.m=this.A=!1,this.s=0,this.o=null,this.I=Cr,this.F=this.G=!1}Rt(xr,Me);var Cr="",Nr=/^https?$/i,Dr=["POST","PUT"];function Rr(t){return"content-type"==t.toLowerCase()}function Or(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Pr(t),Fr(t)}function Pr(t){t.A||(t.A=!0,Ve(t,"complete"),Ve(t,"error"))}function Lr(t){if(t.b&&void 0!==wt&&(!t.u[1]||4!=Vr(t)||2!=t.W()))if(t.m&&4==Vr(t))Xe(t.Aa,0,t);else if(Ve(t,"readystatechange"),4==Vr(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.C).match(zn)[1]||null;if(!o&&_t.self&&_t.self.location){var s=_t.self.location.protocol;o=s.substr(0,s.length-1)}i=!Nr.test(o?o.toLowerCase():"")}e=i}if(e)Ve(t,"complete"),Ve(t,"success");else{t.h=6;try{var a=2<Vr(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Pr(t)}}finally{Fr(t)}}}function Fr(t,e){if(t.a){Mr(t);var n=t.a,r=t.u[0]?Tt:null;t.a=null,t.u=null,e||Ve(t,"ready");try{n.onreadystatechange=r}catch(Pp){}}}function Mr(t){t.a&&t.F&&(t.a.ontimeout=null),t.o&&(_t.clearTimeout(t.o),t.o=null)}function Vr(t){return t.a?t.a.readyState:0}function Ur(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return zt(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Yn(t,e,n))}function jr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function qr(t){this.qa=0,this.g=[],this.c=new an,this.ha=this.ma=this.B=this.ga=this.a=this.oa=this.A=this.V=this.i=this.O=this.l=null,this.Pa=this.R=0,this.Ma=jr("failFast",!1,t),this.G=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.pa=this.P=-1,this.T=this.o=this.u=0,this.Ia=jr("baseRetryDelayMs",5e3,t),this.Sa=jr("retryDelaySeedMs",1e4,t),this.Na=jr("forwardChannelMaxRetries",2,t),this.na=jr("forwardChannelRequestTimeoutMs",2e4,t),this.Oa=t&&t.xmlHttpFactory||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new yr(t&&t.concurrentRequestLimit),this.la=new Ir,this.ea=t&&t.fastHandshake||!1,this.Ja=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.ea&&this.S&&t&&t.detectBufferingProxy||!1,this.fa=void 0,this.N=0,this.F=!1,this.s=null,(this.La=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Br(t){if(Hr(t),3==t.v){var e=t.R++,n=Jn(t.B);Yn(n,"SID",t.J),Yn(n,"RID",e),Yn(n,"TYPE","terminate"),Wr(t,n),(e=new An(t,t.c,e,void 0)).G=2,e.i=Xn(Jn(n)),n=!1,_t.navigator&&_t.navigator.sendBeacon&&(n=_t.navigator.sendBeacon(e.i.toString(),"")),!n&&_t.Image&&((new Image).src=e.i,n=!0),n||(e.a=si(e.g,null),e.a.ba(e.i)),e.u=Dt(),Ln(e)}ii(t)}function Gr(t){t.a&&(Yr(t),t.a.cancel(),t.a=null)}function Hr(t){Gr(t),t.j&&(_t.clearTimeout(t.j),t.j=null),ti(t),t.b.cancel(),t.h&&("number"==typeof t.h&&_t.clearTimeout(t.h),t.h=null)}function zr(t,e){t.g.push(new pr(t.Pa++,e)),3==t.v&&Kr(t)}function Kr(t){gr(t.b)||t.h||(t.h=!0,Je(t.Ca,t),t.u=0)}function Jr(t,e){var n;n=e?e.f:t.R++;var r=Jn(t.B);Yn(r,"SID",t.J),Yn(r,"RID",n),Yn(r,"AID",t.P),Wr(t,r),t.i&&t.l&&Ur(r,t.i,t.l),n=new An(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Qr(t,n,1e3),n.setTimeout(Math.round(.5*t.na)+Math.round(.5*t.na*Math.random())),wr(t.b,n),Dn(n,r,e)}function Wr(t,e){t.f&&qn({},function(t,n){Yn(e,n,t)})}function Qr(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Ct(t.f.Ka,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Sr(l,s,"req"+c+"_")}catch(Gi){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Zr(t){t.a||t.j||(t.T=1,Je(t.Ba,t),t.o=0)}function $r(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=gn(Ct(t.Ba,t),ni(t,t.o)),t.o++,0))}function Yr(t){null!=t.s&&(_t.clearTimeout(t.s),t.s=null)}function Xr(t){t.a=new An(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Jn(t.ma);Yn(e,"RID","rpc"),Yn(e,"SID",t.J),Yn(e,"CI",t.G?"0":"1"),Yn(e,"AID",t.P),Wr(t,e),Yn(e,"TYPE","xmlhttp"),t.i&&t.l&&Ur(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ha,n.G=1,n.i=Xn(Jn(e)),n.j=null,n.I=!0,Rn(n,t)}function ti(t){null!=t.m&&(_t.clearTimeout(t.m),t.m=null)}function ei(t,e){var n=null;if(t.a==e){ti(t),Yr(t),t.a=null;var r=2}else{if(!br(t.b,e))return;n=e.s,_r(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Dt()-e.u;var i=t.u;Ve(r=hn(),new mn(r,n,e,i)),Kr(t)}else Zr(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(vr(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ma?0:t.Na)||(t.h=gn(Ct(t.Ca,t,e),ni(t,t.u)),t.u++,0)))}(t,e)||2==r&&$r(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:ri(t,5);break;case 4:ri(t,10);break;case 3:ri(t,6);break;default:ri(t,2)}}function ni(t,e){var n=t.Ia+Math.floor(Math.random()*t.Sa);return t.f||(n*=2),n*e}function ri(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Ct(t.cb,t);n||(n=new Kn("//www.google.com/images/cleardot.gif"),_t.location&&"http"==_t.location.protocol||Wn(n,"https"),Xn(n)),function(t,e){var n=new an;if(_t.Image){var r=new Image;r.onload=Nt(kr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Nt(kr,n,r,"TestLoadImage: error",!1,e),r.onabort=Nt(kr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Nt(kr,n,r,"TestLoadImage: timeout",!1,e),_t.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else yn(2);t.v=0,t.f&&t.f.sa(e),ii(t),Hr(t)}function ii(t){t.v=0,t.I=-1,t.f&&(0==Tr(t.b).length&&0==t.g.length||(t.b.c.length=0,Mt(t.g),t.g.length=0),t.f.ra())}function oi(t,e,n){var r=function(t){return t instanceof Kn?Jn(t):new Kn(t,void 0)}(n);if(""!=r.c)e&&Qn(r,e+"."+r.c),Zn(r,r.h);else{var i=_t.location;r=function(t,e,n,r){var i=new Kn(null,void 0);return t&&Wn(i,t),e&&Qn(i,e),n&&Zn(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&zt(t.V,function(t,e){Yn(r,e,t)}),n=t.oa,(e=t.A)&&n&&Yn(r,e,n),Yn(r,"VER",t.ia),Wr(t,r),r}function si(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new xr(t.Oa)).G=t.C,e}function ai(){}function ui(){if(Xt&&!(10<=Number(le)))throw Error("Environmental error: no available transport.")}function ci(t,e){Me.call(this),this.a=new qr(e),this.g=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Vt(t)&&(this.a.i=t),this.o=e&&e.supportsCrossDomainXhr||!1,this.m=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vt(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new fi(this)}function li(t){In.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function hi(){Sn.call(this),this.status=1}function fi(t){this.a=t}function di(t){this.f=t}function pi(t){Me.call(this),this.u=t,this.h=void 0,this.readyState=yi,this.status=0,this.responseType=this.responseText=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.o="",this.a=!1,this.m=this.f=this.g=null}(vt=xr.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.C+"; newUri="+t);e=e?e.toUpperCase():"GET",this.C=t,this.f="",this.h=0,this.A=!1,this.b=!0,this.a=this.l?this.l.a():Tn.a(),this.u=function(t){return t.b||(t.b=t.c())}(this.l?this.l:Tn),this.a.onreadystatechange=Ct(this.Aa,this);try{this.B=!0,this.a.open(e,String(t),!0),this.B=!1}catch(o){return void Or(this,o)}t=n||"";var i=new Bn(this.headers);r&&qn(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Rr,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=_t.FormData&&t instanceof _t.FormData,!(0<=Pt(Dr,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.G&&(this.a.withCredentials=this.G);try{Mr(this),0<this.s&&((this.F=function(t){return Xt&&ce(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.s,this.a.ontimeout=Ct(this.ya,this)):this.o=Xe(this.ya,this.s,this)),this.m=!0,this.a.send(t),this.m=!1}catch(o){Or(this,o)}},vt.ya=function(){void 0!==wt&&this.a&&(this.f="Timed out after "+this.s+"ms, aborting",this.h=8,Ve(this,"timeout"),this.abort(8))},vt.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Ve(this,"complete"),Ve(this,"abort"),Fr(this))},vt.H=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Fr(this,!0)),xr.X.H.call(this)},vt.Aa=function(){this.j||(this.B||this.m||this.g?Lr(this):this.Za())},vt.Za=function(){Lr(this)},vt.W=function(){try{return 2<Vr(this)?this.a.status:-1}catch($t){return-1}},vt.$=function(){try{return this.a?this.a.responseText:""}catch($t){return""}},vt.Qa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ar(e)}},vt.va=function(){return this.h},vt.Ra=function(){return"string"==typeof this.f?this.f:String(this.f)},(vt=qr.prototype).ia=8,vt.v=1,vt.Ca=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new An(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Wt(r=Kt(r),this.O):r=this.O),null===this.i&&(n.B=r),this.ea)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Qr(this,n,e),Yn(i=Jn(this.B),"RID",t),Yn(i,"CVER",22),this.A&&Yn(i,"X-HTTP-Session-Id",this.A),Wr(this,i),this.i&&r&&Ur(i,this.i,r),wr(this.b,n),this.Ja&&Yn(i,"TYPE","init"),this.ea?(Yn(i,"$req",e),Yn(i,"SID","null"),n.U=!0,Dn(n,i,null)):Dn(n,i,e),this.v=2}}else 3==this.v&&(t?Jr(this,t):0==this.g.length||gr(this.b)||Jr(this))},vt.Ba=function(){if(this.j=null,Xr(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=gn(Ct(this.Ya,this),t)}},vt.Ya=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.F=!0,yn(10),Gr(this),Xr(this))},vt.Xa=function(){null!=this.m&&(this.m=null,Gr(this),$r(this),yn(19))},vt.cb=function(t){t?(this.c.info("Successfully pinged google.com"),yn(2)):(this.c.info("Failed to ping google.com"),yn(1))},(vt=ai.prototype).ua=function(){},vt.ta=function(){},vt.sa=function(){},vt.ra=function(){},vt.Ka=function(){},ui.prototype.a=function(t,e){return new ci(t,e)},Rt(ci,Me),ci.prototype.h=function(){this.a.f=this.f,this.o&&(this.a.C=!0);var t=this.a,e=this.g,n=this.b||void 0;yn(0),t.ga=e,t.V=n||{},t.G=t.S,t.B=oi(t,null,t.ga),Kr(t)},ci.prototype.close=function(){Br(this.a)},ci.prototype.l=function(t){if("string"==typeof t){var e={};e.__data__=t,zr(this.a,e)}else this.m?((e={}).__data__=je(t),zr(this.a,e)):zr(this.a,t)},ci.prototype.H=function(){this.a.f=null,delete this.f,Br(this.a),delete this.a,ci.X.H.call(this)},Rt(li,In),Rt(hi,Sn),Rt(fi,ai),fi.prototype.ua=function(){Ve(this.a,"a")},fi.prototype.ta=function(t){Ve(this.a,new li(t))},fi.prototype.sa=function(t){Ve(this.a,new hi(t))},fi.prototype.ra=function(){Ve(this.a,"b")},Rt(di,wn),di.prototype.a=function(){return new pi(this.f)},di.prototype.c=function(t){return function(){return t}}({}),Rt(pi,Me);var yi=0;function mi(t){t.f.read().then(t.Ta.bind(t)).catch(t.ca.bind(t))}function gi(t){t.readyState=4,t.g=null,t.f=null,t.m=null,vi(t)}function vi(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(vt=pi.prototype).open=function(t,e){if(this.readyState!=yi)throw this.abort(),Error("Error reopening a connection");this.s=t,this.o=e,this.readyState=1,vi(this)},vt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.o,e)).then(this.Wa.bind(this),this.ca.bind(this))},vt.abort=function(){this.responseText="",this.l=new Headers,this.status=0,this.f&&this.f.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,gi(this)),this.readyState=yi},vt.Wa=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,vi(this)),this.a&&(this.readyState=3,vi(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.Ua.bind(this),this.ca.bind(this)):void 0!==_t.ReadableStream&&"body"in t?(this.responseText="",this.f=t.body.getReader(),this.m=new TextDecoder,mi(this)):t.text().then(this.Va.bind(this),this.ca.bind(this)))))},vt.Ta=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.responseText+=e),t.done?gi(this):vi(this),3==this.readyState&&mi(this)}},vt.Va=function(t){this.a&&(this.responseText=t,gi(this))},vt.Ua=function(){this.a&&gi(this)},vt.ca=function(){this.a&&gi(this)},vt.setRequestHeader=function(t,e){this.l.append(t,e)},vt.getResponseHeader=function(t){return this.b&&this.b.get(t.toLowerCase())||""},vt.getAllResponseHeaders=function(){if(!this.b)return"";for(var t=[],e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(pi.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),ui.prototype.createWebChannel=ui.prototype.a,ci.prototype.send=ci.prototype.l,ci.prototype.open=ci.prototype.h,ci.prototype.close=ci.prototype.close,vn.NO_ERROR=0,vn.TIMEOUT=8,vn.HTTP_ERROR=6,bn.COMPLETE="complete",_n.EventType=En,En.OPEN="a",En.CLOSE="b",En.ERROR="c",En.MESSAGE="d",Me.prototype.listen=Me.prototype.wa,xr.prototype.listenOnce=xr.prototype.xa,xr.prototype.getLastError=xr.prototype.Ra,xr.prototype.getLastErrorCode=xr.prototype.va,xr.prototype.getStatus=xr.prototype.W,xr.prototype.getResponseJson=xr.prototype.Qa,xr.prototype.getResponseText=xr.prototype.$,xr.prototype.send=xr.prototype.ba;var bi=vn,wi=bn,_i=cn,Ti=di,Ei=_n,Ii=xr,Si=n(762),ki=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();ki.o=-1;var Ai={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},xi=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,Si.ZT)(e,t),e}(Error),Ci=new yt.Yd("@firebase/firestore");function Ni(){return Ci.logLevel}function Di(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ci.logLevel<=yt.in.DEBUG){var r=e.map(Pi);Ci.debug.apply(Ci,(0,Si.ev)(["Firestore (8.6.7): "+t],r))}}function Ri(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ci.logLevel<=yt.in.ERROR){var r=e.map(Pi);Ci.error.apply(Ci,(0,Si.ev)(["Firestore (8.6.7): "+t],r))}}function Oi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ci.logLevel<=yt.in.WARN){var r=e.map(Pi);Ci.warn.apply(Ci,(0,Si.ev)(["Firestore (8.6.7): "+t],r))}}function Pi(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Pp){return t}}function Li(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.6.7) INTERNAL ASSERTION FAILED: "+t;throw Ri(e),new Error(e)}function Fi(t,e){t||Li()}function Mi(t,e){return t}function Vi(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Ui=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Vi(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function ji(t,e){return t<e?-1:t>e?1:0}function qi(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Bi(t){return t+"\0"}var Gi=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new xi(Ai.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new xi(Ai.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new xi(Ai.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new xi(Ai.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?ji(this.nanoseconds,t.nanoseconds):ji(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Hi=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Gi(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function zi(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ki(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ji(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Wi=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Li(),void 0===n?n=t.length-e:n>t.length-e&&Li(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Qi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Si.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new xi(Ai.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Wi),Zi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Si.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Zi.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new xi(Ai.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new xi(Ai.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new xi(Ai.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new xi(Ai.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Wi),Yi=function(){function t(t){this.fields=t,t.sort($i.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return qi(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Xi=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return ji(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Xi.EMPTY_BYTE_STRING=new Xi("");var to=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eo(t){if(Fi(!!t),"string"==typeof t){var e=0,n=to.exec(t);if(Fi(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:no(t.seconds),nanos:no(t.nanos)}}function no(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ro(t){return"string"==typeof t?Xi.fromBase64String(t):Xi.fromUint8Array(t)}function io(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function oo(t){var e=t.mapValue.fields.__previous_value__;return io(e)?oo(e):e}function so(t){var e=eo(t.mapValue.fields.__local_write_time__.timestampValue);return new Gi(e.seconds,e.nanos)}function ao(t){return null==t}function uo(t){return 0===t&&1/t==-1/0}function co(t){return"number"==typeof t&&Number.isInteger(t)&&!uo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var lo=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Qi.fromString(e))},t.fromName=function(e){return new t(Qi.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Qi.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Qi.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Qi(e.slice()))},t}();function ho(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?io(t)?4:10:Li()}function fo(t,e){var n=ho(t);if(n!==ho(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return so(t).isEqual(so(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=eo(t.timestampValue),r=eo(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ro(t.bytesValue).isEqual(ro(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return no(t.geoPointValue.latitude)===no(e.geoPointValue.latitude)&&no(t.geoPointValue.longitude)===no(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return no(t.integerValue)===no(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=no(t.doubleValue),r=no(e.doubleValue);return n===r?uo(n)===uo(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return qi(t.arrayValue.values||[],e.arrayValue.values||[],fo);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(zi(n)!==zi(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!fo(n[i],r[i])))return!1;return!0}(t,e);default:return Li()}}function po(t,e){return void 0!==(t.values||[]).find(function(t){return fo(t,e)})}function yo(t,e){var n=ho(t),r=ho(e);if(n!==r)return ji(n,r);switch(n){case 0:return 0;case 1:return ji(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=no(t.integerValue||t.doubleValue),r=no(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return mo(t.timestampValue,e.timestampValue);case 4:return mo(so(t),so(e));case 5:return ji(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ro(t),r=ro(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=ji(n[i],r[i]);if(0!==o)return o}return ji(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=ji(no(t.latitude),no(e.latitude));return 0!==n?n:ji(no(t.longitude),no(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=yo(n[i],r[i]);if(o)return o}return ji(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=ji(r[s],o[s]);if(0!==a)return a;var u=yo(n[r[s]],i[o[s]]);if(0!==u)return u}return ji(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Li()}}function mo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ji(t,e);var n=eo(t),r=eo(e),i=ji(n.seconds,r.seconds);return 0!==i?i:ji(n.nanos,r.nanos)}function go(t){return vo(t)}function vo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=eo(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ro(t.bytesValue).toBase64():"referenceValue"in t?lo.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=vo(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+vo(t.fields[o])}return e+"}"}(t.mapValue):Li();var e}function bo(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function wo(t){return!!t&&"integerValue"in t}function _o(t){return!!t&&"arrayValue"in t}function To(t){return!!t&&"nullValue"in t}function Eo(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Io(t){return!!t&&"mapValue"in t}function So(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},eo(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return Ki(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=So(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=So(t.arrayValue.values[r]);return n}return Object.assign({},t)}var ko=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Io(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=So(e)},t.prototype.setAll=function(t){var e=this,n=$i.emptyPath(),r={},i=[];t.forEach(function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=So(t):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Io(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return fo(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Io(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Ki(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(So(this.value))},t}();function Ao(t){var e=[];return Ki(t.fields,function(t,n){var r=new $i([t]);if(Io(n)){var i=Ao(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Yi(e)}var xo=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Hi.min(),ko.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,ko.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,ko.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=ko.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=ko.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Co=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function No(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Co(t,e,n,r,i,o,s)}function Do(t){var e=Mi(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+go(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),ao(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ho(e.startAt)),e.endAt&&(n+="|ub:",n+=Ho(e.endAt)),e.h=n}return e.h}function Ro(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ko(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!fo(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Wo(t.startAt,e.startAt)&&Wo(t.endAt,e.endAt)}function Oo(t){return lo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Po=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,Si.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Lo(t,n,r):"array-contains"===n?new Uo(t,r):"in"===n?new jo(t,r):"not-in"===n?new qo(t,r):"array-contains-any"===n?new Bo(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Fo(t,n):new Mo(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(yo(e,this.value)):null!==e&&ho(this.value)===ho(e)&&this.m(yo(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Li()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Lo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=lo.fromName(r.referenceValue),i}return(0,Si.ZT)(e,t),e.prototype.matches=function(t){var e=lo.comparator(t.key,this.key);return this.m(e)},e}(Po),Fo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Vo(0,n),r}return(0,Si.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Po),Mo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Vo(0,n),r}return(0,Si.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Po);function Vo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return lo.fromName(t.referenceValue)})}var Uo=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,Si.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return _o(e)&&po(e.arrayValue,this.value)},e}(Po),jo=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,Si.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&po(this.value.arrayValue,e)},e}(Po),qo=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,Si.ZT)(e,t),e.prototype.matches=function(t){if(po(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!po(this.value.arrayValue,e)},e}(Po),Bo=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,Si.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!_o(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return po(e.value.arrayValue,t)})},e}(Po),Go=function(t,e){this.position=t,this.before=e};function Ho(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return go(t)}).join(",")}var zo=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ko(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Jo(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?lo.comparator(lo.fromName(s.referenceValue),n.key):yo(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Wo(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!fo(t.position[n],e.position[n]))return!1;return!0}var Qo=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Zo(t,e,n,r,i,o,s,a){return new Qo(t,e,n,r,i,o,s,a)}function $o(t){return new Qo(t)}function Yo(t){return!ao(t.limit)&&"F"===t.limitType}function Xo(t){return!ao(t.limit)&&"L"===t.limitType}function ts(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function es(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function ns(t){return null!==t.collectionGroup}function rs(t){var e=Mi(t);if(null===e.p){e.p=[];var n=es(e),r=ts(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new zo(n)),e.p.push(new zo($i.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new zo($i.keyField(),u))}}}return e.p}function is(t){var e=Mi(t);if(!e.T)if("F"===e.limitType)e.T=No(e.path,e.collectionGroup,rs(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=rs(e);r<i.length;r++){var o=i[r];n.push(new zo(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Go(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Go(e.startAt.position,!e.startAt.before):null;e.T=No(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function os(t,e,n){return new Qo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ss(t,e){return Ro(is(t),is(e))&&t.limitType===e.limitType}function as(t){return Do(is(t))+"|lt:"+t.limitType}function us(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+go(e.value);var e}).join(", ")+"]"),ao(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ho(t.startAt)),t.endAt&&(e+=", endAt: "+Ho(t.endAt)),"Target("+e+")"}(is(t))+"; limitType="+t.limitType+")"}function cs(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):lo.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Jo(t.startAt,rs(t),e)||t.endAt&&Jo(t.endAt,rs(t),e))}(t,e)}function ls(t){return function(e,n){for(var r=!1,i=0,o=rs(t);i<o.length;i++){var s=o[i],a=hs(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function hs(t,e,n){var r=t.field.isKeyField()?lo.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?yo(r,i):Li()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Li()}}function fs(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uo(e)?"-0":e}}function ds(t){return{integerValue:""+t}}function ps(t,e){return co(e)?ds(e):fs(t,e)}var ys=function(){this._=void 0};function ms(t,e,n){return t instanceof bs?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ws?_s(t,e):t instanceof Ts?Es(t,e):function(t,e){var n=vs(t,e),r=Ss(n)+Ss(t.A);return wo(n)&&wo(t.A)?ds(r):fs(t.R,r)}(t,e)}function gs(t,e,n){return t instanceof ws?_s(t,e):t instanceof Ts?Es(t,e):n}function vs(t,e){return t instanceof Is?wo(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var bs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Si.ZT)(e,t),e}(ys),ws=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Si.ZT)(e,t),e}(ys);function _s(t,e){for(var n=ks(e),r=function(t){n.some(function(e){return fo(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ts=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Si.ZT)(e,t),e}(ys);function Es(t,e){for(var n=ks(e),r=function(t){n=n.filter(function(e){return!fo(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Is=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,Si.ZT)(e,t),e}(ys);function Ss(t){return no(t.integerValue||t.doubleValue)}function ks(t){return _o(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var As=function(t,e){this.field=t,this.transform=e},xs=function(t,e){this.version=t,this.transformResults=e},Cs=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Ns(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Ds=function(){};function Rs(t,e,n){t instanceof Ms?function(t,e,n){var r=t.value.clone(),i=js(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Vs?function(t,e,n){if(Ns(t.precondition,e)){var r=js(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Us(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Os(t,e,n){t instanceof Ms?function(t,e,n){if(Ns(t.precondition,e)){var r=t.value.clone(),i=qs(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Fs(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Vs?function(t,e,n){if(Ns(t.precondition,e)){var r=qs(t.fieldTransforms,n,e),i=e.data;i.setAll(Us(t)),i.setAll(r),e.convertToFoundDocument(Fs(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Ns(t.precondition,e)&&e.convertToNoDocument(Hi.min())}(t,e)}function Ps(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=vs(o.transform,s||null);null!=a&&(null==n&&(n=ko.empty()),n.set(o.field,a))}return n||null}function Ls(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&qi(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ws&&e instanceof ws||t instanceof Ts&&e instanceof Ts?qi(t.elements,e.elements,fo):t instanceof Is&&e instanceof Is?fo(t.A,e.A):t instanceof bs&&e instanceof bs}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Fs(t){return t.isFoundDocument()?t.version:Hi.min()}var Ms=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,Si.ZT)(e,t),e}(Ds),Vs=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return(0,Si.ZT)(e,t),e}(Ds);function Us(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function js(t,e,n){var r=new Map;Fi(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,gs(s,a,n[i]))}return r}function qs(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,ms(a,u,e))}return r}var Bs,Gs,Hs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,Si.ZT)(e,t),e}(Ds),zs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,Si.ZT)(e,t),e}(Ds),Ks=function(t){this.count=t};function Js(t){switch(t){case Ai.OK:return Li();case Ai.CANCELLED:case Ai.UNKNOWN:case Ai.DEADLINE_EXCEEDED:case Ai.RESOURCE_EXHAUSTED:case Ai.INTERNAL:case Ai.UNAVAILABLE:case Ai.UNAUTHENTICATED:return!1;case Ai.INVALID_ARGUMENT:case Ai.NOT_FOUND:case Ai.ALREADY_EXISTS:case Ai.PERMISSION_DENIED:case Ai.FAILED_PRECONDITION:case Ai.ABORTED:case Ai.OUT_OF_RANGE:case Ai.UNIMPLEMENTED:case Ai.DATA_LOSS:return!0;default:return Li()}}function Ws(t){if(void 0===t)return Ri("GRPC error has no .code"),Ai.UNKNOWN;switch(t){case Bs.OK:return Ai.OK;case Bs.CANCELLED:return Ai.CANCELLED;case Bs.UNKNOWN:return Ai.UNKNOWN;case Bs.DEADLINE_EXCEEDED:return Ai.DEADLINE_EXCEEDED;case Bs.RESOURCE_EXHAUSTED:return Ai.RESOURCE_EXHAUSTED;case Bs.INTERNAL:return Ai.INTERNAL;case Bs.UNAVAILABLE:return Ai.UNAVAILABLE;case Bs.UNAUTHENTICATED:return Ai.UNAUTHENTICATED;case Bs.INVALID_ARGUMENT:return Ai.INVALID_ARGUMENT;case Bs.NOT_FOUND:return Ai.NOT_FOUND;case Bs.ALREADY_EXISTS:return Ai.ALREADY_EXISTS;case Bs.PERMISSION_DENIED:return Ai.PERMISSION_DENIED;case Bs.FAILED_PRECONDITION:return Ai.FAILED_PRECONDITION;case Bs.ABORTED:return Ai.ABORTED;case Bs.OUT_OF_RANGE:return Ai.OUT_OF_RANGE;case Bs.UNIMPLEMENTED:return Ai.UNIMPLEMENTED;case Bs.DATA_LOSS:return Ai.DATA_LOSS;default:return Li()}}(Gs=Bs||(Bs={}))[Gs.OK=0]="OK",Gs[Gs.CANCELLED=1]="CANCELLED",Gs[Gs.UNKNOWN=2]="UNKNOWN",Gs[Gs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gs[Gs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gs[Gs.NOT_FOUND=5]="NOT_FOUND",Gs[Gs.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gs[Gs.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gs[Gs.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gs[Gs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gs[Gs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gs[Gs.ABORTED=10]="ABORTED",Gs[Gs.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gs[Gs.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gs[Gs.INTERNAL=13]="INTERNAL",Gs[Gs.UNAVAILABLE=14]="UNAVAILABLE",Gs[Gs.DATA_LOSS=15]="DATA_LOSS";var Qs=function(){function t(t,e){this.comparator=t,this.root=e||$s.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$s.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$s.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Zs(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Zs(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Zs(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Zs(this.root,t,this.comparator,!0)},t}(),Zs=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),$s=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Li();if(this.right.isRed())throw Li();var t=this.left.check();if(t!==this.right.check())throw Li();return t+(this.isRed()?0:1)},t}();$s.EMPTY=null,$s.RED=!0,$s.BLACK=!1,$s.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Li()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Li()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Li()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Li()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Li()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new $s(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Ys=function(){function t(t){this.comparator=t,this.data=new Qs(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Xs(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Xs(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Xs=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ta=new Qs(lo.comparator);function ea(){return ta}var na=new Qs(lo.comparator);function ra(){return na}var ia=new Qs(lo.comparator);function oa(){return ia}var sa=new Ys(lo.comparator);function aa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=sa,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ua=new Ys(ji);function ca(){return ua}var la=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,ha.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Hi.min(),r,ca(),ea(),aa())},t}(),ha=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Xi.EMPTY_BYTE_STRING,n,aa(),aa(),aa())},t}(),fa=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},da=function(t,e){this.targetId=t,this.V=e},pa=function(t,e,n,r){void 0===n&&(n=Xi.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ya=function(){function t(){this.S=0,this.D=va(),this.C=Xi.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=aa(),e=aa(),n=aa();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Li()}}),new ha(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=va()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),ma=function(){function t(t){this.W=t,this.G=new Map,this.H=ea(),this.J=ga(),this.Y=new Ys(ji)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Li()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Oo(i))if(0===n){var o=new lo(i.path);this.tt(e,o,xo.newNoDocument(o,Hi.min()))}else Fi(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&Oo(o.target)){var s=new lo(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,xo.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=aa();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new la(t,n,this.Y,this.H,r);return this.H=ea(),this.J=ga(),this.Y=new Ys(ji),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new ya,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Ys(ji),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Di("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new ya),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function ga(){return new Qs(lo.comparator)}function va(){return new Qs(lo.comparator)}var ba={asc:"ASCENDING",desc:"DESCENDING"},wa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_a=function(t,e){this.databaseId=t,this.I=e};function Ta(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ea(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ia(t,e){return Ta(t,e.toTimestamp())}function Sa(t){return Fi(!!t),Hi.fromTimestamp(function(t){var e=eo(t);return new Gi(e.seconds,e.nanos)}(t))}function ka(t,e){return function(t){return new Qi(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Aa(t){var e=Qi.fromString(t);return Fi($a(e)),e}function xa(t,e){return ka(t.databaseId,e.path)}function Ca(t,e){var n=Aa(e);if(n.get(1)!==t.databaseId.projectId)throw new xi(Ai.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xi(Ai.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new lo(Oa(n))}function Na(t,e){return ka(t.databaseId,e)}function Da(t){var e=Aa(t);return 4===e.length?Qi.emptyPath():Oa(e)}function Ra(t){return new Qi(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Oa(t){return Fi(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Pa(t,e,n){return{name:xa(t,e),fields:n.value.mapValue.fields}}function La(t,e,n){var r=Ca(t,e.name),i=Sa(e.updateTime),o=new ko({mapValue:{fields:e.fields}}),s=xo.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Fa(t,e){var n;if(e instanceof Ms)n={update:Pa(t,e.key,e.value)};else if(e instanceof Hs)n={delete:xa(t,e.key)};else if(e instanceof Vs)n={update:Pa(t,e.key,e.data),updateMask:Za(e.fieldMask)};else{if(!(e instanceof zs))return Li();n={verify:xa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof bs)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ws)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ts)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Is)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Li()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ia(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Li()}(t,e.precondition)),n}function Ma(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Cs.updateTime(Sa(t.updateTime)):void 0!==t.exists?Cs.exists(t.exists):Cs.none()}(e.currentDocument):Cs.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Fi("REQUEST_TIME"===e.setToServerValue),n=new bs):"appendMissingElements"in e?n=new ws(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Ts(e.removeAllFromArray.values||[]):"increment"in e?n=new Is(t,e.increment):Li();var r=$i.fromServerFormat(e.fieldPath);return new As(r,n)}(t,e)}):[];if(e.update){var i=Ca(t,e.update.name),o=new ko({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Yi((t.fieldPaths||[]).map(function(t){return $i.fromServerFormat(t)}))}(e.updateMask);return new Vs(i,o,s,n,r)}return new Ms(i,o,n,r)}if(e.delete){var a=Ca(t,e.delete);return new Hs(a,n)}if(e.verify){var u=Ca(t,e.verify);return new zs(u,n)}return Li()}function Va(t,e){return{documents:[Na(t,e.path)]}}function Ua(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Na(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Na(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Eo(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NAN"}};if(To(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Eo(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NOT_NAN"}};if(To(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ka(t.field),op:za(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Ka(t.field),direction:Ha(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||ao(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Ba(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ba(e.endAt)),n}function ja(t){var e=Da(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Fi(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=qa(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new zo(Ja(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return ao(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Ga(n.startAt));var l=null;return n.endAt&&(l=Ga(n.endAt)),Zo(e,i,a,s,u,"F",c,l)}function qa(t){return t?void 0!==t.unaryFilter?[Qa(t)]:void 0!==t.fieldFilter?[Wa(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return qa(t)}).reduce(function(t,e){return t.concat(e)}):Li():[]}function Ba(t){return{before:t.before,values:t.position}}function Ga(t){return new Go(t.values||[],!!t.before)}function Ha(t){return ba[t]}function za(t){return wa[t]}function Ka(t){return{fieldPath:t.canonicalString()}}function Ja(t){return $i.fromServerFormat(t.fieldPath)}function Wa(t){return Po.create(Ja(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Li()}}(t.fieldFilter.op),t.fieldFilter.value)}function Qa(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Ja(t.unaryFilter.field);return Po.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Ja(t.unaryFilter.field);return Po.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ja(t.unaryFilter.field);return Po.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ja(t.unaryFilter.field);return Po.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Li()}}function Za(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function $a(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Ya(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=tu(e)),e=Xa(t.get(n),e);return tu(e)}function Xa(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function tu(t){return t+"\x01\x01"}function eu(t){var e=t.length;if(Fi(e>=2),2===e)return Fi("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Qi.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Li(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Li()}o=s+2}return new Qi(r)}var nu=function(t,e){this.seconds=t,this.nanoseconds=e},ru=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ru.store="owner",ru.key="owner";var iu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};iu.store="mutationQueues",iu.keyPath="userId";var ou=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};ou.store="mutations",ou.keyPath="batchId",ou.userMutationsIndex="userMutationsIndex",ou.userMutationsKeyPath=["userId","batchId"];var su=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ya(e)]},t.key=function(t,e,n){return[t,Ya(e),n]},t}();su.store="documentMutations",su.PLACEHOLDER=new su;var au=function(t,e){this.path=t,this.readTime=e},uu=function(t,e){this.path=t,this.version=e},cu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};cu.store="remoteDocuments",cu.readTimeIndex="readTimeIndex",cu.readTimeIndexPath="readTime",cu.collectionReadTimeIndex="collectionReadTimeIndex",cu.collectionReadTimeIndexPath=["parentPath","readTime"];var lu=function(t){this.byteSize=t};lu.store="remoteDocumentGlobal",lu.key="remoteDocumentGlobalKey";var hu=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};hu.store="targets",hu.keyPath="targetId",hu.queryTargetsIndexName="queryTargetsIndex",hu.queryTargetsKeyPath=["canonicalId","targetId"];var fu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};fu.store="targetDocuments",fu.keyPath=["targetId","path"],fu.documentTargetsIndex="documentTargetsIndex",fu.documentTargetsKeyPath=["path","targetId"];var du=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};du.key="targetGlobalKey",du.store="targetGlobal";var pu=function(t,e){this.collectionId=t,this.parent=e};pu.store="collectionParents",pu.keyPath=["collectionId","parent"];var yu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};yu.store="clientMetadata",yu.keyPath="clientId";var mu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};mu.store="bundles",mu.keyPath="bundleId";var gu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};gu.store="namedQueries",gu.keyPath="name";var vu=(0,Si.ev)((0,Si.ev)([],(0,Si.ev)((0,Si.ev)([],(0,Si.ev)((0,Si.ev)([],(0,Si.ev)((0,Si.ev)([],[iu.store,ou.store,su.store,cu.store,hu.store,ru.store,du.store,fu.store]),[yu.store])),[lu.store])),[pu.store])),[mu.store,gu.store]),bu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",wu=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),_u=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Tu=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Li(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Eu=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new _u,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new ku(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Du(e.target.error);n.ft.reject(new ku(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ku(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Di("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new xu(e)},t}(),Iu=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,pt.z$)())&&Ri("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Di("SimpleDb","Removing database:",t),Cu(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,pt.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,Si.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Si.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Di("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new ku(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new xi(Ai.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new ku(t,n))},i.onupgradeneeded=function(t){Di("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Di("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,Si.mG)(this,void 0,void 0,function(){var i,o,s,a,u;return(0,Si.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return(0,Si.Jh)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Eu.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Tu.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Di("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Su=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Cu(this.Pt.delete())},t}(),ku=function(t){function e(e,n){var r=this;return(r=t.call(this,Ai.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,Si.ZT)(e,t),e}(xi);function Au(t){return"IndexedDbTransactionError"===t.name}var xu=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Di("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Di("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Cu(n)},t.prototype.add=function(t){return Di("SimpleDb","ADD",this.store.name,t,t),Cu(this.store.add(t))},t.prototype.get=function(t){var e=this;return Cu(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Di("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Di("SimpleDb","DELETE",this.store.name,t),Cu(this.store.delete(t))},t.prototype.count=function(){return Di("SimpleDb","COUNT",this.store.name),Cu(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Di("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Tu(function(n,r){e.onerror=function(t){var e=Du(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Tu(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Su(i),s=e(i.primaryKey,i.value,o);if(s instanceof Tu){var a=s.catch(function(t){return o.done(),Tu.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Tu.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Cu(t){return new Tu(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Du(t.target.error);n(e)}})}var Nu=!1;function Du(t){var e=Iu._t((0,pt.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new xi("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Nu||(Nu=!0,setTimeout(function(){throw r},0)),r}}return t}var Ru=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,Si.ZT)(e,t),e}(wu);function Ou(t,e){var n=Mi(t);return Iu.It(n.Mt,e)}var Pu=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Rs(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Os(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Os(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Hi.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},aa())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&qi(this.mutations,t.mutations,function(t,e){return Ls(t,e)})&&qi(this.baseMutations,t.baseMutations,function(t,e){return Ls(t,e)})},t}(),Lu=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Fi(e.mutations.length===r.length);for(var i=oa(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Fu=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Hi.min()),void 0===o&&(o=Hi.min()),void 0===s&&(s=Xi.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Mu=function(t){this.Lt=t};function Vu(t,e){if(e.document)return La(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=lo.fromSegments(e.noDocument.path),r=Gu(e.noDocument.readTime),i=xo.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=lo.fromSegments(e.unknownDocument.path);return r=Gu(e.unknownDocument.version),xo.newUnknownDocument(o,r)}return Li()}function Uu(t,e,n){var r=ju(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:xa(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Ta(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new cu(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Bu(e.version);return s=e.hasCommittedMutations,new cu(null,new au(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Bu(e.version);return new cu(new uu(c,l),null,null,!0,r,i)}return Li()}function ju(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function qu(t){var e=new Gi(t[0],t[1]);return Hi.fromTimestamp(e)}function Bu(t){var e=t.toTimestamp();return new nu(e.seconds,e.nanoseconds)}function Gu(t){var e=new Gi(t.seconds,t.nanoseconds);return Hi.fromTimestamp(e)}function Hu(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Ma(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Ma(t.Lt,e)}),o=Gi.fromMillis(e.localWriteTimeMs);return new Pu(e.batchId,o,n,i)}function zu(t){var e,n,r=Gu(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Gu(t.lastLimboFreeSnapshotVersion):Hi.min();return void 0!==t.query.documents?(Fi(1===(n=t.query).documents.length),e=is($o(Da(n.documents[0])))):e=function(t){return is(ja(t))}(t.query),new Fu(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Xi.fromBase64String(t.resumeToken))}function Ku(t,e){var n,r=Bu(e.snapshotVersion),i=Bu(e.lastLimboFreeSnapshotVersion);n=Oo(e.target)?Va(t.Lt,e.target):Ua(t.Lt,e.target);var o=e.resumeToken.toBase64();return new hu(e.targetId,Do(e.target),r,o,e.sequenceNumber,i,n)}function Ju(t){var e=ja({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?os(e,e.limit,"L"):e}var Wu=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Qu(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Gu(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Qu(t).put({bundleId:(n=e).id,createTime:Bu(Sa(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Zu(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Ju(e.bundledQuery),readTime:Gu(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Zu(t).put(function(t){return{name:t.name,readTime:Bu(Sa(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Qu(t){return Ou(t,mu.store)}function Zu(t){return Ou(t,gu.store)}var $u=function(){function t(){this.Bt=new Yu}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Tu.resolve()},t.prototype.getCollectionParents=function(t,e){return Tu.resolve(this.Bt.getEntries(e))},t}(),Yu=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ys(Qi.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ys(Qi.comparator)).toArray()},t}(),Xu=function(){function t(){this.qt=new Yu}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:Ya(i)};return tc(t).put(o)}return Tu.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Bi(e),""],!1,!0);return tc(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(eu(o.parent))}return n})},t}();function tc(t){return Ou(t,pu.store)}var ec={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nc=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function rc(t,e,n){var r=t.store(ou.store),i=t.store(su.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Fi(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=su.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Tu.waitFor(o).next(function(){return c})}function ic(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Li();e=t.noDocument}return JSON.stringify(e).length}nc.DEFAULT_COLLECTION_PERCENTILE=10,nc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nc.DEFAULT=new nc(41943040,nc.DEFAULT_COLLECTION_PERCENTILE,nc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nc.DISABLED=new nc(-1,0,0);var oc=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Fi(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ac(t).$t({index:ou.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=uc(t),s=ac(t);return s.add({}).next(function(a){Fi("number"==typeof a);for(var u=new Pu(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Fa(t.Lt,e)}),i=n.mutations.map(function(e){return Fa(t.Lt,e)});return new ou(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Ys(function(t,e){return ji(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],y=su.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(y,su.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),Tu.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return ac(t).get(e).next(function(t){return t?(Fi(t.userId===n.userId),Hu(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Tu.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ac(t).$t({index:ou.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Fi(e.batchId>=r),o=Hu(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ac(t).$t({index:ou.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ac(t).Nt(ou.userMutationsIndex,n).next(function(t){return t.map(function(t){return Hu(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=su.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return uc(t).$t({range:i},function(r,i,s){var a=r[0],u=r[2],c=eu(r[1]);if(a===n.userId&&e.path.isEqual(c))return ac(t).get(u).next(function(t){if(!t)throw Li();Fi(t.userId===n.userId),o.push(Hu(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ys(ji),i=[];return e.forEach(function(e){var o=su.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=uc(t).$t({range:s},function(t,i,o){var s=t[0],a=t[2],u=eu(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Tu.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=su.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ys(ji);return uc(t).$t({range:s},function(t,e,o){var s=t[0],u=t[2],c=eu(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(ac(t).get(e).next(function(t){if(null===t)throw Li();Fi(t.userId===n.userId),r.push(Hu(n.R,t))}))}),Tu.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return rc(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Tu.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Tu.resolve();var r=IDBKeyRange.lowerBound(su.prefixForUser(e.userId)),i=[];return uc(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var o=eu(t[1]);i.push(o)}else r.done()}).next(function(){Fi(0===i.length)})})},t.prototype.containsKey=function(t,e){return sc(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return cc(t).get(this.userId).next(function(t){return t||new iu(e.userId,-1,"")})},t}();function sc(t,e,n){var r=su.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return uc(t).$t({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function ac(t){return Ou(t,ou.store)}function uc(t){return Ou(t,su.store)}function cc(t){return Ou(t,iu.store)}var lc=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),hc=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new lc(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Hi.fromTimestamp(new Gi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return fc(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Fi(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return fc(t).$t(function(s,a){var u=zu(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Tu.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return fc(t).$t(function(t,n){var r=zu(n);e(r)})},t.prototype.Xt=function(t){return dc(t).get(du.key).next(function(t){return Fi(null!==t),t})},t.prototype.Zt=function(t,e){return dc(t).put(du.key,e)},t.prototype.te=function(t,e){return fc(t).put(Ku(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Do(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return fc(t).$t({range:r,index:hu.queryTargetsIndexName},function(t,n,r){var o=zu(n);Ro(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=pc(t);return e.forEach(function(e){var s=Ya(e.path);i.push(o.put(new fu(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Tu.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=pc(t);return Tu.forEach(e,function(e){var o=Ya(e.path);return Tu.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=pc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=pc(t),i=aa();return r.$t({range:n,kt:!0},function(t,e,n){var r=eu(t[1]),o=new lo(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Ya(e.path),r=IDBKeyRange.bound([n],[Bi(n)],!1,!0),i=0;return pc(t).$t({index:fu.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return fc(t).get(e).next(function(t){return t?zu(t):null})},t}();function fc(t){return Ou(t,hu.store)}function dc(t){return Ou(t,du.store)}function pc(t){return Ou(t,fu.store)}function yc(t){return(0,Si.mG)(this,void 0,void 0,function(){return(0,Si.Jh)(this,function(e){if(t.code!==Ai.FAILED_PRECONDITION||t.message!==bu)throw t;return Di("LocalStore","Unexpectedly lost primary lease"),[2]})})}function mc(t,e){var n=t[1],r=e[1],i=ji(t[0],e[0]);return 0===i?ji(n,r):i}var gc=function(){function t(t){this.ne=t,this.buffer=new Ys(mc),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();mc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),vc=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Di("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,Si.mG)(e,void 0,void 0,function(){var e;return(0,Si.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Au(e=n.sent())?(Di("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,yc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),bc=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Tu.resolve(ki.o);var r=new gc(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Di("LruGarbageCollector","Garbage collection skipped; disabled"),Tu.resolve(ec)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Di("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),ec):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Di("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Ni()<=yt.in.DEBUG&&Di("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Tu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),wc=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new bc(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return _c(t,n)},t.prototype.removeReference=function(t,e,n){return _c(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return _c(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return cc(t).Ot(function(r){return sc(t,r,e).next(function(t){return t&&(n=!0),Tu.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),pc(t).delete([0,Ya(s.path)])})});i.push(u)}}).next(function(){return Tu.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return _c(t,e)},t.prototype.we=function(t,e){var n,r=pc(t),i=ki.o;return r.$t({index:fu.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==ki.o&&e(new lo(eu(n)),i),i=s,n=o):i=ki.o}).next(function(){i!==ki.o&&e(new lo(eu(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function _c(t,e){return pc(t).put(function(t,e){return new fu(0,Ya(t.path),e)}(e,t.currentSequenceNumber))}var Tc=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Ki(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return Ji(this.inner)},t}(),Ec=function(){function t(){this.changes=new Tc(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Hi.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:xo.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Tu.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Ic=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Ac(t).put(xc(e),n)},t.prototype.removeEntry=function(t,e){var n=Ac(t),r=xc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Ac(t).get(xc(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Ac(t).get(xc(e)).next(function(t){return{document:n.ye(e,t),size:ic(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=ea();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=ea(),i=new Qs(lo.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,ic(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Tu.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Ac(t).$t({range:r},function(t,e,r){for(var s=lo.fromSegments(t);o&&lo.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ea(),o=e.path.length+1,s={};if(n.isEqual(Hi.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=ju(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=cu.collectionReadTimeIndex}return Ac(t).$t(s,function(t,n,s){if(t.length===o){var a=Vu(r.R,n);e.path.isPrefixOf(a.key.path)?cs(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Sc(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return kc(t).get(lu.key).next(function(t){return Fi(!!t),t})},t.prototype.me=function(t,e){return kc(t).put(lu.key,e)},t.prototype.ye=function(t,e){if(e){var n=Vu(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Hi.min()))return n}return xo.newInvalidDocument(t)},t}(),Sc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Tc(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,Si.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Ys(function(t,e){return ji(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Uu(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=ic(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Uu(e.Ie.R,xo.newNoDocument(o,Hi.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Tu.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Ec);function kc(t){return Ou(t,lu.store)}function Ac(t){return Ou(t,cu.store)}function xc(t){return t.path.toArray()}var Cc=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Fi(n<r&&n>=0&&r<=11);var o=new Eu("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(ru.store)}(t),function(t){t.createObjectStore(iu.store,{keyPath:iu.keyPath}),t.createObjectStore(ou.store,{keyPath:ou.keyPath,autoIncrement:!0}).createIndex(ou.userMutationsIndex,ou.userMutationsKeyPath,{unique:!0}),t.createObjectStore(su.store)}(t),Nc(t),function(t){t.createObjectStore(cu.store)}(t));var s=Tu.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(fu.store),t.deleteObjectStore(hu.store),t.deleteObjectStore(du.store)}(t),Nc(t)),s=s.next(function(){return function(t){var e=t.store(du.store),n=new du(0,0,Hi.min().toTimestamp(),0);return e.put(du.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(ou.store).Nt().next(function(n){t.deleteObjectStore(ou.store),t.createObjectStore(ou.store,{keyPath:ou.keyPath,autoIncrement:!0}).createIndex(ou.userMutationsIndex,ou.userMutationsKeyPath,{unique:!0});var r=e.store(ou.store),i=n.map(function(t){return r.put(t)});return Tu.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(yu.store,{keyPath:yu.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(lu.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(cu.store);e.createIndex(cu.readTimeIndex,cu.readTimeIndexPath,{unique:!1}),e.createIndex(cu.collectionReadTimeIndex,cu.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(mu.store,{keyPath:mu.keyPath})}(t),function(t){t.createObjectStore(gu.store,{keyPath:gu.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(cu.store).$t(function(t,n){e+=ic(n)}).next(function(){var n=new lu(e);return t.store(lu.store).put(lu.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(iu.store),r=t.store(ou.store);return n.Nt().next(function(n){return Tu.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(ou.userMutationsIndex,i).next(function(r){return Tu.forEach(r,function(r){Fi(r.userId===n.userId);var i=Hu(e.R,r);return rc(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(fu.store),n=t.store(cu.store);return t.store(du.store).get(du.key).next(function(t){var r=[];return n.$t(function(n,i){var o=new Qi(n),s=function(t){return[0,Ya(t)]}(o);r.push(e.get(s).next(function(n){return n?Tu.resolve():function(n){return e.put(new fu(0,Ya(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Tu.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(pu.store,{keyPath:pu.keyPath});var n=e.store(pu.store),r=new Yu,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Ya(i)})}};return e.store(cu.store).$t({kt:!0},function(t,e){var n=new Qi(t);return i(n.popLast())}).next(function(){return e.store(su.store).$t({kt:!0},function(t,e){var n=eu(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(hu.store);return n.$t(function(t,r){var i=zu(r),o=Ku(e.R,i);return n.put(o)})},t}();function Nc(t){t.createObjectStore(fu.store,{keyPath:fu.keyPath}).createIndex(fu.documentTargetsIndex,fu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(hu.store,{keyPath:hu.keyPath}).createIndex(hu.queryTargetsIndexName,hu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(du.store)}var Dc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Rc=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new xi(Ai.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wc(this,i),this.Le=n+"main",this.R=new Mu(u),this.Be=new Iu(this.Le,11,new Cc(this.R)),this.qe=new hc(this.referenceDelegate,this.R),this.Ut=new Xu,this.Ue=function(t,e){return new Ic(t,e)}(this.R,this.Ut),this.Qe=new Wu,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&Ri("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new xi(Ai.FAILED_PRECONDITION,Dc);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new ki(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,Si.mG)(e,void 0,void 0,function(){return(0,Si.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,Si.mG)(e,void 0,void 0,function(){return(0,Si.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,Si.mG)(e,void 0,void 0,function(){return(0,Si.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Pc(e).put(new yu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Au(e))return Di("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Di("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Oc(t).get(ru.key).next(function(t){return Tu.resolve(e.tn(t))})},t.prototype.en=function(t){return Pc(t).delete(this.clientId)},t.prototype.nn=function(){return(0,Si.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Si.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Ou(t,yu.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Tu.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Tu.resolve(!0):Oc(t).get(ru.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new xi(Ai.FAILED_PRECONDITION,Dc);return!1}}return!(!e.networkEnabled||!e.inForeground)||Pc(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Di("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,Si.mG)(this,void 0,void 0,function(){var t=this;return(0,Si.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[ru.store,yu.store],function(e){var n=new Ru(e,ki.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Pc(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return oc.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Di("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",vu,function(o){return r=new Ru(o,i.Ne?i.Ne.next():ki.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Ri("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new xi(Ai.FAILED_PRECONDITION,bu);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Oc(t).get(ru.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new xi(Ai.FAILED_PRECONDITION,Dc)})},t.prototype.Ze=function(t){var e=new ru(this.clientId,this.allowTabSynchronization,Date.now());return Oc(t).put(ru.key,e)},t.yt=function(){return Iu.yt()},t.prototype.Xe=function(t){var e=this,n=Oc(t);return n.get(ru.key).next(function(t){return e.tn(t)?(Di("IndexedDbPersistence","Releasing primary lease."),n.delete(ru.key)):Tu.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Ri("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Di("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Ri("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Ri("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Oc(t){return Ou(t,ru.store)}function Pc(t){return Ou(t,yu.store)}function Lc(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Fc=function(t,e){this.progress=t,this.wn=e},Mc=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return lo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):ns(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new lo(e)).next(function(t){var e=ra();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=ra();return this.Ut.getCollectionParents(t,i).next(function(s){return Tu.forEach(s,function(s){var a=function(t,e){return new Qo(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=xo.newInvalidDocument(c),r=r.insert(c,l)),Os(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){cs(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=aa(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Vs&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Vc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=aa(),i=aa(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Uc=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Hi.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(Yo(e)||Xo(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Ni()<=yt.in.DEBUG&&Di("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),us(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Ys(ls(t));return e.forEach(function(e,r){cs(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Ni()<=yt.in.DEBUG&&Di("QueryEngine","Using full collection scan to execute query:",us(e)),this.Sn.getDocumentsMatchingQuery(t,e,Hi.min())},t}(),jc=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Qs(ji),this.kn=new Tc(function(t){return Do(t)},Ro),this.$n=Hi.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Mc(this.On,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function qc(t,e,n,r){return new jc(t,e,n,r)}function Bc(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Si.Jh)(this,function(s){switch(s.label){case 0:return n=Mi(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Mc(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=aa(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var y=0,m=p.mutations;y<m.length;y++)s=s.add(m[y].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function Gc(t,e){var n=Mi(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Tu.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Fi(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Hc(t){var e=Mi(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function zc(t,e){var n=Mi(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Fi(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=ea();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(Kc(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Hi.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Tu.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function Kc(t,e,n,r,i){var o=aa();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=ea();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Hi.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Di("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Jc(t,e){var n=Mi(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function Wc(t,e){var n=Mi(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Tu.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Fu(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function Qc(t,e,n){return(0,Si.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Si.Jh)(this,function(a){switch(a.label){case 0:r=Mi(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Au(s=a.sent()))throw s;return Di("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Zc(t,e,n){var r=Mi(t),i=Hi.min(),o=aa();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Mi(t),i=r.kn.get(n);return void 0!==i?Tu.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,is(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Hi.min(),n?o:aa())}).next(function(t){return{documents:t,Bn:o}})})}function $c(t,e){var n=Mi(t),r=Mi(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function Yc(t){var e=Mi(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Mi(t),i=ea(),o=ju(n),s=Ac(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:cu.readTimeIndex,range:a},function(t,e){var n=Vu(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:qu(o)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function Xc(t){return(0,Si.mG)(this,void 0,void 0,function(){var e;return(0,Si.Jh)(this,function(n){return[2,(e=Mi(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Ac(t),n=Hi.min();return e.$t({index:cu.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=qu(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function tl(t,e,n,r){return(0,Si.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return(0,Si.Jh)(this,function(p){switch(p.label){case 0:for(i=Mi(t),o=aa(),s=ea(),a=oa(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,Wc(i,function(t){return is($o(Qi.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Kc(t,f,s,Hi.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function el(t,e,n){return void 0===n&&(n=aa()),(0,Si.mG)(this,void 0,void 0,function(){var r,i;return(0,Si.Jh)(this,function(o){switch(o.label){case 0:return[4,Wc(t,is(Ju(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Mi(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Sa(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(Xi.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var nl=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Tu.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Sa(n.createTime)}),Tu.resolve()},t.prototype.getNamedQuery=function(t,e){return Tu.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Ju(t.bundledQuery),readTime:Sa(t.readTime)}}(e)),Tu.resolve()},t}(),rl=function(){function t(){this.Wn=new Ys(il.Gn),this.zn=new Ys(il.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new il(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new il(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new lo(new Qi([])),r=new il(n,t),i=new il(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new lo(new Qi([])),n=new il(e,t),r=new il(e,t+1),i=aa();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new il(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),il=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return lo.comparator(t.key,e.key)||ji(t.ns,e.ns)},t.Hn=function(t,e){return ji(t.ns,e.ns)||lo.comparator(t.key,e.key)},t}(),ol=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Ys(il.Gn)}return t.prototype.checkEmpty=function(t){return Tu.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new Pu(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new il(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Tu.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Tu.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Tu.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Tu.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Tu.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new il(e,0),i=new il(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Tu.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ys(ji);return e.forEach(function(t){var e=new il(t,0),i=new il(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Tu.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;lo.isDocumentKey(i)||(i=i.child(""));var o=new il(new lo(i),0),s=new Ys(ji);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Tu.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Fi(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Tu.forEach(e.mutations,function(i){var o=new il(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new il(e,0),r=this.rs.firstAfterOrEqual(n);return Tu.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Tu.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),sl=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Qs(lo.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Tu.resolve(n?n.document.clone():xo.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ea();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():xo.newInvalidDocument(t))}),Tu.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ea(),i=new lo(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||cs(e,u)&&(r=r.insert(u.key,u.clone()))}return Tu.resolve(r)},t.prototype.fs=function(t,e){return Tu.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new al(this)},t.prototype.getSize=function(t){return Tu.resolve(this.size)},t}(),al=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,Si.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Tu.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Ec),ul=function(){function t(t){this.persistence=t,this.ds=new Tc(function(t){return Do(t)},Ro),this.lastRemoteSnapshotVersion=Hi.min(),this.highestTargetId=0,this.ws=0,this._s=new rl,this.targetCount=0,this.ys=lc.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Tu.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Tu.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Tu.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Tu.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Tu.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new lc(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Tu.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Tu.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Tu.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Tu.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Tu.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Tu.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Tu.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Tu.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Tu.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Tu.resolve(n)},t.prototype.containsKey=function(t,e){return Tu.resolve(this._s.containsKey(e))},t}(),cl=function(){function t(t,e){var n=this;this.gs={},this.Ne=new ki(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new ul(this),this.Ut=new $u,this.Ue=function(t,e){return new sl(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Mu(e),this.Qe=new nl(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new ol(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Di("MemoryPersistence","Starting transaction:",t);var i=new ll(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Tu.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),ll=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,Si.ZT)(e,t),e}(wu),hl=function(){function t(t){this.persistence=t,this.As=new rl,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Li()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Tu.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Tu.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Tu.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Tu.forEach(this.vs,function(r){var i=lo.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Tu.or([function(){return Tu.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),fl=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function dl(t,e){return"firestore_clients_"+t+"_"+e}function pl(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function yl(t,e){return"firestore_targets_"+t+"_"+e}fl.UNAUTHENTICATED=new fl(null),fl.GOOGLE_CREDENTIALS=new fl("google-credentials-uid"),fl.FIRST_PARTY=new fl("first-party-uid");var ml=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new xi(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Ri("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),gl=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new xi(i.error.code,i.error.message)),o?new t(e,i.state,r):(Ri("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),vl=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ca(),s=0;i&&s<r.activeTargetIds.length;++s)i=co(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Ri("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),bl=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Ri("SharedClientState","Failed to parse online state: "+e),null)},t}(),wl=function(){function t(){this.activeTargetIds=ca()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),_l=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Qs(ji),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=dl(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new wl),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,Si.mG)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return(0,Si.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(dl(this.persistenceKey,r)))&&(o=vl.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(yl(this.persistenceKey,t));if(n){var r=gl.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(yl(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Di("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Di("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Di("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Di("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Ri("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,Si.mG)(e,void 0,void 0,function(){var t,e,r,i,o,s;return(0,Si.Jh)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=ki.o;if(null!=t)try{var n=JSON.parse(t);Fi("number"==typeof n),e=n}catch(t){Ri("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ki.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new ml(this.currentUser,t,e,n),i=pl(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=pl(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=yl(this.persistenceKey,t),i=new gl(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return vl.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return ml.Vs(new fl(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return gl.Vs(r,e)},t.prototype.js=function(t){return bl.Vs(t)},t.prototype.ii=function(t){return(0,Si.mG)(this,void 0,void 0,function(){return(0,Si.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Di("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ca();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Tl=function(){function t(){this.li=new wl,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new wl,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),El=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Il=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Di("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Di("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Sl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},kl=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Al=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,Si.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Ii;s.listenOnce(wi.COMPLETE,function(){try{switch(s.getLastErrorCode()){case bi.NO_ERROR:var e=s.getResponseJson();Di("Connection","XHR received:",JSON.stringify(e)),i(e);break;case bi.TIMEOUT:Di("Connection",'RPC "'+t+'" timed out'),o(new xi(Ai.DEADLINE_EXCEEDED,"Request time out"));break;case bi.HTTP_ERROR:var n=s.getStatus();if(Di("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ai).indexOf(e)>=0?e:Ai.UNKNOWN}(r.status);o(new xi(a,r.message))}else o(new xi(Ai.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new xi(Ai.UNAVAILABLE,"Connection failed."));break;default:Li()}}finally{Di("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new ui,i=hn(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Ti({})),this.Fi(o.initMessageHeaders,e),(0,pt.uI)()||(0,pt.b$)()||(0,pt.d)()||(0,pt.w1)()||(0,pt.Mn)()||(0,pt.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Di("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new kl({Ei:function(t){c?Di("Connection","Not sending because WebChannel is closed:",t):(u||(Di("Connection","Opening WebChannel transport."),a.open(),u=!0),Di("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Ei.EventType.OPEN,function(){c||Di("Connection","WebChannel transport opened.")}),h(a,Ei.EventType.CLOSE,function(){c||(c=!0,Di("Connection","WebChannel transport closed"),l.Vi())}),h(a,Ei.EventType.ERROR,function(t){c||(c=!0,Oi("Connection","WebChannel transport errored:",t),l.Vi(new xi(Ai.UNAVAILABLE,"The operation could not be completed")))}),h(a,Ei.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Fi(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Di("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Bs[t];if(void 0!==e)return Ws(e)}(i),s=r.message;void 0===o&&(o=Ai.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new xi(o,s)),a.close()}else Di("Connection","WebChannel received:",n),l.Si(n)}}),h(i,_i.STAT_EVENT,function(t){10===t.stat?Di("Connection","Detected buffering proxy"):11===t.stat&&Di("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Di("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Di("RestConnection","Received: ",t),t},function(e){throw Oi("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.7",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Sl[t]},t}());function xl(){return"undefined"!=typeof window?window:null}function Cl(){return"undefined"!=typeof document?document:null}function Nl(t){return new _a(t,!0)}var Dl=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Di("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Rl=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Dl(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,Si.mG)(this,void 0,void 0,function(){return(0,Si.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,Si.mG)(this,void 0,void 0,function(){return(0,Si.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,Si.mG)(this,void 0,void 0,function(){return(0,Si.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Ai.RESOURCE_EXHAUSTED?(Ri(e.toString()),Ri("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Ai.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new xi(Ai.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,Si.mG)(t,void 0,void 0,function(){return(0,Si.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Di("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Di("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Ol=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return(0,Si.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Li()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Fi(void 0===e||"string"==typeof e),Xi.fromBase64String(e||"")):(Fi(void 0===e||e instanceof Uint8Array),Xi.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ai.UNKNOWN:Ws(t.code);return new xi(e,t.message||"")}(a);n=new pa(r,i,o,s||null)}else if("documentChange"in e){i=Ca(t,(r=e.documentChange).document.name),o=Sa(r.document.updateTime);var a=new ko({mapValue:{fields:r.document.fields}}),u=(s=xo.newFoundDocument(i,o,a),r.targetIds||[]);n=new fa(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Ca(t,(r=e.documentDelete).document),o=r.readTime?Sa(r.readTime):Hi.min(),a=xo.newNoDocument(i,o),n=new fa([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Ca(t,(r=e.documentRemove).document),n=new fa([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Li();var c=e.filter;i=new Ks(r=c.count||0),n=new da(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Hi.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Hi.min():e.readTime?Sa(e.readTime):Hi.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Ra(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Oo(r)?{documents:Va(t,r)}:{query:Ua(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Ea(t,e.resumeToken):e.snapshotVersion.compareTo(Hi.min())>0&&(n.readTime=Ta(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Li()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Ra(this.R),e.removeTarget=t,this.cr(e)},e}(Rl),Pl=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return(0,Si.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Fi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Fi(void 0!==e),t.map(function(t){return function(t,e){var n=Sa(t.updateTime?t.updateTime:e);return n.isEqual(Hi.min())&&(n=Sa(e)),new xs(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Sa(t.commitTime);return this.listener.Tr(n,e)}return Fi(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Ra(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Fa(e.R,t)})};this.cr(n)},e}(Rl),Ll=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,Si.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new xi(Ai.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Ai.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new xi(Ai.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Ai.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new xi(Ai.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Fl=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Ri(e),this.Vr=!1):Di("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Ml=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,Si.mG)(o,void 0,void 0,function(){return(0,Si.Jh)(this,function(t){switch(t.label){case 0:return Kl(this)?(Di("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,Si.mG)(this,void 0,void 0,function(){var e;return(0,Si.Jh)(this,function(n){switch(n.label){case 0:return(e=Mi(t)).Or.add(4),[4,Ul(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Vl(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Fl(n,r)};function Vl(t){return(0,Si.mG)(this,void 0,void 0,function(){var e,n;return(0,Si.Jh)(this,function(r){switch(r.label){case 0:if(!Kl(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Ul(t){return(0,Si.mG)(this,void 0,void 0,function(){var e,n;return(0,Si.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function jl(t,e){var n=Mi(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),zl(n)?Hl(n):ah(n).er()&&Bl(n,e))}function ql(t,e){var n=Mi(t),r=ah(n);n.$r.delete(e),r.er()&&Gl(n,e),0===n.$r.size&&(r.er()?r.ir():Kl(n)&&n.Br.set("Unknown"))}function Bl(t,e){t.qr.U(e.targetId),ah(t).mr(e)}function Gl(t,e){t.qr.U(e),ah(t).yr(e)}function Hl(t){t.qr=new ma({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),ah(t).start(),t.Br.Sr()}function zl(t){return Kl(t)&&!ah(t).tr()&&t.$r.size>0}function Kl(t){return 0===Mi(t).Or.size}function Jl(t){t.qr=void 0}function Wl(t){return(0,Si.mG)(this,void 0,void 0,function(){return(0,Si.Jh)(this,function(e){return t.$r.forEach(function(e,n){Bl(t,e)}),[2]})})}function Ql(t,e){return(0,Si.mG)(this,void 0,void 0,function(){return(0,Si.Jh)(this,function(n){return Jl(t),zl(t)?(t.Br.Nr(e),Hl(t)):t.Br.set("Unknown"),[2]})})}function Zl(t,e,n){return(0,Si.mG)(this,void 0,void 0,function(){var r,i,o;return(0,Si.Jh)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof pa&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Si.Jh)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.$r.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Di("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,$l(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof fa?t.qr.X(e):e instanceof da?t.qr.rt(e):t.qr.et(e),n.isEqual(Hi.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Hc(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Xi.EMPTY_BYTE_STRING,n.snapshotVersion)),Gl(t,e);var r=new Fu(n.target,e,1,n.sequenceNumber);Bl(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Di("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,$l(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function $l(t,e,n){return(0,Si.mG)(this,void 0,void 0,function(){var r=this;return(0,Si.Jh)(this,function(i){switch(i.label){case 0:if(!Au(e))throw e;return t.Or.add(1),[4,Ul(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Hc(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,Si.mG)(r,void 0,void 0,function(){return(0,Si.Jh)(this,function(e){switch(e.label){case 0:return Di("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Vl(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Yl(t,e){return e().catch(function(n){return $l(t,n,e)})}function Xl(t){return(0,Si.mG)(this,void 0,void 0,function(){var e,n,r,i,o;return(0,Si.Jh)(this,function(s){switch(s.label){case 0:e=Mi(t),n=uh(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Kl(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Jc(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=uh(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,$l(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return th(e)&&eh(e),[2]}})})}function th(t){return Kl(t)&&!uh(t).tr()&&t.kr.length>0}function eh(t){uh(t).start()}function nh(t){return(0,Si.mG)(this,void 0,void 0,function(){return(0,Si.Jh)(this,function(e){return uh(t).Ar(),[2]})})}function rh(t){return(0,Si.mG)(this,void 0,void 0,function(){var e,n,r;return(0,Si.Jh)(this,function(i){for(e=uh(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function ih(t,e,n){return(0,Si.mG)(this,void 0,void 0,function(){var r,i;return(0,Si.Jh)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Lu.from(r,e,n),[4,Yl(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Xl(t)];case 2:return o.sent(),[2]}})})}function oh(t,e){return(0,Si.mG)(this,void 0,void 0,function(){return(0,Si.Jh)(this,function(n){switch(n.label){case 0:return e&&uh(t).pr?[4,function(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r;return(0,Si.Jh)(this,function(i){switch(i.label){case 0:return Js(r=e.code)&&r!==Ai.ABORTED?(n=t.kr.shift(),uh(t).sr(),[4,Yl(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Xl(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return th(t)&&eh(t),[2]}})})}function sh(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n;return(0,Si.Jh)(this,function(r){switch(r.label){case 0:return n=Mi(t),e?(n.Or.delete(2),[4,Vl(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Ul(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function ah(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Mi(t);return r.br(),new Ol(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Wl.bind(null,t),Ri:Ql.bind(null,t),_r:Zl.bind(null,t)}),t.Mr.push(function(n){return(0,Si.mG)(e,void 0,void 0,function(){return(0,Si.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),zl(t)?Hl(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Jl(t),e.label=3;case 3:return[2]}})})})),t.Ur}function uh(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Mi(t);return r.br(),new Pl(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:nh.bind(null,t),Ri:oh.bind(null,t),Ir:rh.bind(null,t),Tr:ih.bind(null,t)}),t.Mr.push(function(n){return(0,Si.mG)(e,void 0,void 0,function(){return(0,Si.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,Xl(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Di("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var ch=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new _u,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xi(Ai.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function lh(t,e){if(Ri("AsyncQueue",e+": "+t),Au(t))return new xi(Ai.UNAVAILABLE,e+": "+t);throw t}var hh=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||lo.comparator(e.key,n.key)}:function(t,e){return lo.comparator(t.key,e.key)},this.keyedMap=ra(),this.sortedSet=new Qs(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),fh=function(){function t(){this.Kr=new Qs(lo.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Li():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),dh=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,hh.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ss(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ph=function(){this.Wr=void 0,this.listeners=[]},yh=function(){this.queries=new Tc(function(t){return as(t)},ss),this.onlineState="Unknown",this.Gr=new Set};function mh(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Si.Jh)(this,function(c){switch(c.label){case 0:if(n=Mi(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new ph),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=lh(a,"Initialization of query '"+us(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&wh(n),[2]}})})}function gh(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Si.Jh)(this,function(a){return n=Mi(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function vh(t,e){for(var n=Mi(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&wh(n)}function bh(t,e,n){var r=Mi(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function wh(t){t.Gr.forEach(function(t){t.next()})}var _h=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new dh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=dh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Th=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Eh=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Ca(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?La(this.R,t.document,!1):xo.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Sa(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Eh(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||aa()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,Si.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,Si.Jh)(this,function(o){switch(o.label){case 0:return[4,tl(this.localStore,new Eh(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,el(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Fc(Object.assign({},this.progress),t))]}})})}}();var Ih=function(t){this.key=t},Sh=function(t){this.key=t},kh=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=aa(),this.mutatedKeys=aa(),this.lo=ls(t),this.fo=new hh(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new fh,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Yo(this.query)&&i.size===this.query.limit?i.last():null,c=Xo(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=cs(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Yo(this.query)||Xo(this.query))for(;s.size>this.query.limit;){var l=Yo(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Li()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new dh(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new fh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=aa(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Sh(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Ih(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=aa();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return dh.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Ah=function(t,e,n){this.query=t,this.targetId=e,this.view=n},xh=function(t){this.key=t,this.bo=!1},Ch=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Tc(function(t){return as(t)},ss),this.Vo=new Map,this.So=new Set,this.Do=new Qs(lo.comparator),this.Co=new Map,this.No=new rl,this.xo={},this.Fo=new Map,this.ko=lc.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Nh(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Si.Jh)(this,function(a){switch(a.label){case 0:return n=sf(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,Wc(n.localStore,is(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Dh(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&jl(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Dh(t,e,n,r){return(0,Si.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c;return(0,Si.Jh)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,Si.mG)(this,void 0,void 0,function(){var i,o,s;return(0,Si.Jh)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Zc(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Hh(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,Zc(t.localStore,e,!0)];case 1:return i=l.sent(),o=new kh(e,i.Bn),s=o._o(i.documents),a=ha.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Hh(t,n,u.To),c=new Ah(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Rh(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Si.Jh)(this,function(o){switch(o.label){case 0:return n=Mi(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!ss(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Qc(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),ql(n.remoteStore,r.targetId),Bh(n,r.targetId)}).catch(yc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Bh(n,r.targetId),[4,Qc(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Oh(t,e,n){return(0,Si.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Si.Jh)(this,function(a){switch(a.label){case 0:r=af(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Mi(t),i=Gi.now(),o=e.reduce(function(t,e){return t.add(e.key)},aa());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Ps(c,n.get(c.key));null!=l&&s.push(new Vs(c.key,l,Ao(l.value.mapValue),Cs.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Qs(ji)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Jh(r,i.changes)];case 3:return a.sent(),[4,Xl(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=lh(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Ph(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r;return(0,Si.Jh)(this,function(i){switch(i.label){case 0:n=Mi(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,zc(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Fi(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Fi(r.bo):t.removedDocuments.size>0&&(Fi(r.bo),r.bo=!1))}),[4,Jh(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,yc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Lh(t,e,n){var r=Mi(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Mi(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&wh(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Fh(t,e,n){return(0,Si.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u;return(0,Si.Jh)(this,function(c){switch(c.label){case 0:return(r=Mi(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Qs(lo.comparator)).insert(o,xo.newNoDocument(o,Hi.min())),a=aa().add(o),u=new la(Hi.min(),new Map,new Ys(ji),s,a),[4,Ph(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Kh(r),[3,4];case 2:return[4,Qc(r.localStore,e,!1).then(function(){return Bh(r,e,n)}).catch(yc)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Mh(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Si.Jh)(this,function(o){switch(o.label){case 0:n=Mi(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Gc(n.localStore,e)];case 2:return i=o.sent(),qh(n,r,null),jh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Jh(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,yc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Vh(t,e,n){return(0,Si.mG)(this,void 0,void 0,function(){var r,i;return(0,Si.Jh)(this,function(o){switch(o.label){case 0:r=Mi(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Mi(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Fi(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),qh(r,e,n),jh(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Jh(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,yc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Uh(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Si.Jh)(this,function(a){switch(a.label){case 0:Kl((n=Mi(t)).remoteStore)||Di("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Mi(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=lh(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function jh(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function qh(t,e,n){var r=Mi(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Bh(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||Gh(t,e)})}function Gh(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(ql(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Kh(t))}function Hh(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Ih?(t.No.addReference(o.key,e),zh(t,o)):o instanceof Sh?(Di("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Gh(t,o.key)):Li()}}function zh(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Di("SyncEngine","New document in limbo: "+n),t.So.add(r),Kh(t))}function Kh(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new lo(Qi.fromString(e)),r=t.ko.next();t.Co.set(r,new xh(n)),t.Do=t.Do.insert(n,r),jl(t.remoteStore,new Fu(is($o(n.path)),r,2,ki.o))}}function Jh(t,e,n){return(0,Si.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Si.Jh)(this,function(a){switch(a.label){case 0:return r=Mi(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Vc.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return(0,Si.Jh)(this,function(l){switch(l.label){case 0:n=Mi(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Tu.forEach(e,function(e){return Tu.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Tu.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Au(r=l.sent()))throw r;return Di("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Wh(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r;return(0,Si.Jh)(this,function(i){switch(i.label){case 0:return(n=Mi(t)).currentUser.isEqual(e)?[3,3]:(Di("SyncEngine","User change. New user:",e.toKey()),[4,Bc(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new xi(Ai.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Jh(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Qh(t,e){var n=Mi(t),r=n.Co.get(e);if(r&&r.bo)return aa().add(r.key);var i=aa(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function Zh(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Si.Jh)(this,function(o){switch(o.label){case 0:return[4,Zc((n=Mi(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Hh(n,e.targetId,i.To),i)]}})})}function $h(t){return(0,Si.mG)(this,void 0,void 0,function(){var e;return(0,Si.Jh)(this,function(n){return[2,Yc((e=Mi(t)).localStore).then(function(t){return Jh(e,t)})]})})}function Yh(t,e,n,r){return(0,Si.mG)(this,void 0,void 0,function(){var i,o;return(0,Si.Jh)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Mi(t),r=Mi(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Tu.resolve(null)})})}((i=Mi(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Xl(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(qh(i,e,r||null),jh(i,e),function(t,e){Mi(Mi(t)._n).Gt(e)}(i.localStore,e)):Li(),s.label=4;case 4:return[4,Jh(i,o)];case 5:return s.sent(),[3,7];case 6:Di("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Xh(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Si.Jh)(this,function(c){switch(c.label){case 0:return sf(n=Mi(t)),af(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,tf(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,sh(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)jl(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Bh(n,e),Qc(n.localStore,e,!0)}),ql(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,tf(n,a)];case 5:return c.sent(),function(t){var e=Mi(t);e.Co.forEach(function(t,n){ql(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Qs(lo.comparator)}(n),n.$o=!1,[4,sh(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function tf(t,e,n){return(0,Si.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return(0,Si.Jh)(this,function(y){switch(y.label){case 0:n=Mi(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,Wc(n.localStore,is(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),l=0,h=c,y.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,Zh(n,f)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,$c(n.localStore,a)];case 8:return p=y.sent(),[4,Wc(n.localStore,p)];case 9:return u=y.sent(),[4,Dh(n,ef(p),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function ef(t){return Zo(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function nf(t){var e=Mi(t);return Mi(Mi(e.localStore).persistence).fn()}function rf(t,e,n,r){return(0,Si.mG)(this,void 0,void 0,function(){var i,o,s;return(0,Si.Jh)(this,function(a){switch(a.label){case 0:return(i=Mi(t)).$o?(Di("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Yc(i.localStore)];case 3:return o=a.sent(),s=la.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Jh(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Qc(i.localStore,e,!0)];case 6:return a.sent(),Bh(i,e,r),[3,8];case 7:Li(),a.label=8;case 8:return[2]}})})}function of(t,e,n){return(0,Si.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return(0,Si.Jh)(this,function(f){switch(f.label){case 0:if(!(r=sf(t)).$o)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Di("SyncEngine","Adding an already active target "+s),[3,5]):[4,$c(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,Wc(r.localStore,a)];case 3:return u=f.sent(),[4,Dh(r,ef(a),u.targetId,!1)];case 4:f.sent(),jl(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,Si.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Qc(r.localStore,t,!1).then(function(){ql(r.remoteStore,t),Bh(r,t)}).catch(yc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function sf(t){var e=Mi(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ph.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Fh.bind(null,e),e.vo._r=vh.bind(null,e.eventManager),e.vo.Mo=bh.bind(null,e.eventManager),e}function af(t){var e=Mi(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Mh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vh.bind(null,e),e}var uf=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,Si.mG)(this,void 0,void 0,function(){return(0,Si.Jh)(this,function(e){switch(e.label){case 0:return this.R=Nl(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return qc(this.persistence,new Uc,t.initialUser,this.R)},t.prototype.qo=function(t){return new cl(hl.bs,this.R)},t.prototype.Bo=function(t){return new Tl},t.prototype.terminate=function(){return(0,Si.mG)(this,void 0,void 0,function(){return(0,Si.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),cf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,Si.ZT)(e,t),e.prototype.initialize=function(e){return(0,Si.mG)(this,void 0,void 0,function(){return(0,Si.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Xc(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,af(this.Ko.syncEngine)];case 4:return n.sent(),[4,Xl(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return qc(this.persistence,new Uc,t.initialUser,this.R)},e.prototype.Uo=function(t){return new vc(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Lc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?nc.withCacheSize(this.cacheSizeBytes):nc.DEFAULT;return new Rc(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,xl(),Cl(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Tl},e}(uf),lf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,Si.ZT)(e,t),e.prototype.initialize=function(e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r=this;return(0,Si.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof _l?(this.sharedClientState.syncEngine={ui:Yh.bind(null,n),ai:rf.bind(null,n),hi:of.bind(null,n),fn:nf.bind(null,n),ci:$h.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,Si.mG)(r,void 0,void 0,function(){return(0,Si.Jh)(this,function(e){switch(e.label){case 0:return[4,Xh(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=xl();if(!_l.yt(e))throw new xi(Ai.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Lc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new _l(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(cf),hf=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n=this;return(0,Si.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Lh(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Wh.bind(null,this.syncEngine),[4,sh(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new yh},t.prototype.createDatastore=function(t){var e=Nl(t.databaseInfo.databaseId),n=new Al(t.databaseInfo);return function(t,e,n){return new Ll(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Lh(s.syncEngine,t,0)},o=Il.yt()?new Il:new El,new Ml(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Ch(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,Si.mG)(this,void 0,void 0,function(){var e;return(0,Si.Jh)(this,function(n){switch(n.label){case 0:return e=Mi(t),Di("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Ul(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),ff=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),df=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new _u,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,Si.mG)(this,void 0,void 0,function(){return(0,Si.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,Si.mG)(this,void 0,void 0,function(){return(0,Si.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,Si.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,Si.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Th(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,Si.mG)(this,void 0,void 0,function(){var t,e;return(0,Si.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,Si.mG)(this,void 0,void 0,function(){var e;return(0,Si.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,Si.mG)(this,void 0,void 0,function(){var t,e;return(0,Si.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,Si.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Si.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new xi(Ai.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Si.Jh)(this,function(u){switch(u.label){case 0:return n=Mi(t),r=Ra(n.R)+"/documents",i={documents:e.map(function(t){return xa(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Fi(!!e.found);var n=Ca(t,e.found.name),r=Sa(e.found.updateTime),i=new ko({mapValue:{fields:e.found.fields}});return xo.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Fi(!!e.missing),Fi(!!e.readTime);var n=Ca(t,e.missing),r=Sa(e.readTime);return xo.newNoDocument(n,r)}(t,e):Li()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Fi(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Hs(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,Si.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Si.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=lo.fromPath(n);e.mutations.push(new zs(r,e.precondition(r)))}),[4,function(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Si.Jh)(this,function(o){switch(o.label){case 0:return n=Mi(t),r=Ra(n.R)+"/documents",i={writes:e.map(function(t){return Fa(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Li();e=Hi.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new xi(Ai.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Cs.updateTime(e):Cs.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Hi.min()))throw new xi(Ai.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cs.updateTime(e)}return Cs.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),pf=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Dl(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,Si.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,Si.Jh)(this,function(r){return t=new df(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!ao(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Js(e)}return!1},t}(),yf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=fl.UNAUTHENTICATED,this.clientId=Ui.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return(0,Si.mG)(r,void 0,void 0,function(){return(0,Si.Jh)(this,function(e){switch(e.label){case 0:return Di("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,Si.mG)(this,void 0,void 0,function(){return(0,Si.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new xi(Ai.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new _u;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Si.mG)(t,void 0,void 0,function(){var t,n;return(0,Si.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=lh(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function mf(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,Si.Jh)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Di("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return(0,Si.mG)(i,void 0,void 0,function(){return(0,Si.Jh)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Bc(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function gf(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r;return(0,Si.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,vf(t)];case 1:return n=i.sent(),Di("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r;return(0,Si.Jh)(this,function(i){switch(i.label){case 0:return(n=Mi(t)).asyncQueue.verifyOperationInProgress(),Di("RemoteStore","RemoteStore received new credentials"),r=Kl(n),n.Or.add(3),[4,Ul(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Vl(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function vf(t){return(0,Si.mG)(this,void 0,void 0,function(){return(0,Si.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Di("FirestoreClient","Using default OfflineComponentProvider"),[4,mf(t,new uf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function bf(t){return(0,Si.mG)(this,void 0,void 0,function(){return(0,Si.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Di("FirestoreClient","Using default OnlineComponentProvider"),[4,gf(t,new hf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function wf(t){return vf(t).then(function(t){return t.persistence})}function _f(t){return vf(t).then(function(t){return t.localStore})}function Tf(t){return bf(t).then(function(t){return t.remoteStore})}function Ef(t){return bf(t).then(function(t){return t.syncEngine})}function If(t){return(0,Si.mG)(this,void 0,void 0,function(){var e,n;return(0,Si.Jh)(this,function(r){switch(r.label){case 0:return[4,bf(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Nh.bind(null,e.syncEngine),n.onUnlisten=Rh.bind(null,e.syncEngine),n)]}})})}function Sf(t,e,n){var r=this;void 0===n&&(n={});var i=new _u;return t.asyncQueue.enqueueAndForget(function(){return(0,Si.mG)(r,void 0,void 0,function(){var r;return(0,Si.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ff({next:function(o){e.enqueueAndForget(function(){return gh(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new xi(Ai.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new xi(Ai.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new _h($o(n.path),o,{includeMetadataChanges:!0,so:!0});return mh(t,s)},[4,If(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function kf(t,e,n){var r=this;void 0===n&&(n={});var i=new _u;return t.asyncQueue.enqueueAndForget(function(){return(0,Si.mG)(r,void 0,void 0,function(){var r;return(0,Si.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ff({next:function(n){e.enqueueAndForget(function(){return gh(t,s)}),n.fromCache&&"server"===r.source?i.reject(new xi(Ai.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new _h(n,o,{includeMetadataChanges:!0,so:!0});return mh(t,s)},[4,If(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Af=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},xf=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Cf=new Map,Nf=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Df=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(fl.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Rf=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Of=function(){function t(t){var e=this;this.currentUser=fl.UNAUTHENTICATED,this.oc=new _u,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){Di("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Di("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Di("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Fi("string"==typeof n.accessToken),new Nf(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,Si.mG)(n,void 0,void 0,function(){return(0,Si.Jh)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Fi(null===t||"string"==typeof t),new fl(t)},t}(),Pf=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=fl.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Lf=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Pf(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(fl.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Ff(t,e,n){if(!n)throw new xi(Ai.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Mf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xi(Ai.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Vf(t,e,n,r){if(!0===e&&!0===r)throw new xi(Ai.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Uf(t){if(!lo.isDocumentKey(t))throw new xi(Ai.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function jf(t){if(lo.isDocumentKey(t))throw new xi(Ai.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function qf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Li()}function Bf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xi(Ai.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=qf(t);throw new xi(Ai.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Gf(t,e){if(e<=0)throw new xi(Ai.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Hf=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new xi(Ai.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new xi(Ai.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Vf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),zf=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hf({}),this._settingsFrozen=!1,t instanceof xf?(this._databaseId=t,this._credentials=new Df):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new xi(Ai.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xf(t.options.projectId)}(t),this._credentials=new Of(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new xi(Ai.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new xi(Ai.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hf(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Df;switch(t.type){case"gapi":var e=t.client;return Fi(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Lf(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xi(Ai.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Cf.get(this))&&(Di("ComponentProvider","Removing Datastore"),Cf.delete(this),t.terminate()),Promise.resolve();var t},t}(),Kf=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Wf(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Jf=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Wf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,$o(r))||this)._path=r,i.type="collection",i}return(0,Si.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Kf(this.firestore,null,new lo(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Jf);function Qf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,pt.m9)(t),Ff("collection","path",e),t instanceof zf)return jf(n=Qi.fromString.apply(Qi,(0,Si.ev)([e],r))),new Wf(t,null,n);if(!(t instanceof Kf||t instanceof Wf))throw new xi(Ai.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return jf(n=Qi.fromString.apply(Qi,(0,Si.ev)([t.path],r)).child(Qi.fromString(e))),new Wf(t.firestore,null,n)}function Zf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,pt.m9)(t),1===arguments.length&&(e=Ui.u()),Ff("doc","path",e),t instanceof zf)return Uf(n=Qi.fromString.apply(Qi,(0,Si.ev)([e],r))),new Kf(t,null,new lo(n));if(!(t instanceof Kf||t instanceof Wf))throw new xi(Ai.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Uf(n=t._path.child(Qi.fromString.apply(Qi,(0,Si.ev)([e],r)))),new Kf(t.firestore,t instanceof Wf?t.converter:null,new lo(n))}function $f(t,e){return t=(0,pt.m9)(t),e=(0,pt.m9)(e),(t instanceof Kf||t instanceof Wf)&&(e instanceof Kf||e instanceof Wf)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Yf(t,e){return t=(0,pt.m9)(t),e=(0,pt.m9)(e),t instanceof Jf&&e instanceof Jf&&t.firestore===e.firestore&&ss(t._query,e._query)&&t.converter===e.converter}var Xf=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new Dl(this,"async_queue_retry"),this.Tc=function(){var e=Cl();e&&Di("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Cl();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=Cl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise(function(t){}):this.Ac(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.Rc()})},t.prototype.Rc=function(){return(0,Si.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Si.Jh)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Au(t=n.sent()))throw t;return Di("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.Rc()}),n.label=5;case 5:return[2]}})})},t.prototype.Ac=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,Ri("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ic(),this.Ec.indexOf(t)>-1&&(e=0);var i=ch.createAndSchedule(this,t,e,n,function(t){return r.bc(t)});return this.mc.push(i),i},t.prototype.Ic=function(){this.yc&&Li()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return(0,Si.mG)(this,void 0,void 0,function(){var t;return(0,Si.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Pc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Vc=function(t){var e=this;return this.vc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.vc()})},t.prototype.Sc=function(t){this.Ec.push(t)},t.prototype.bc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function td(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new _u,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var ed=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Xf,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,Si.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||rd(this),this._firestoreClient.terminate()},e}(zf);function nd(t){return t._firestoreClient||rd(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function rd(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Af(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new yf(t._credentials,t._queue,r)}function id(t,e,n){var r=this,i=new _u;return t.asyncQueue.enqueue(function(){return(0,Si.mG)(r,void 0,void 0,function(){var r;return(0,Si.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,mf(t,n)];case 1:return o.sent(),[4,gf(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ai.FAILED_PRECONDITION||t.code===Ai.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function od(t){if(t._initialized||t._terminated)throw new xi(Ai.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var sd=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new xi(Ai.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $i(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),ad=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Xi.fromBase64String(e))}catch(e){throw new xi(Ai.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Xi.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),ud=function(t){this._methodName=t},cd=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new xi(Ai.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new xi(Ai.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return ji(this._lat,t._lat)||ji(this._long,t._long)},t}(),ld=/^__.*__$/,hd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Vs(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ms(t,this.data,e,this.fieldTransforms)},t}(),fd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Vs(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function dd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Li()}}var pd=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.kc(t),r},t.prototype.$c=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},t.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(t){return Pd(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},t.prototype.kc=function(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(dd(this.Cc)&&ld.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),yd=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Nl(t)}return t.prototype.qc=function(t,e,n,r){return void 0===r&&(r=!1),new pd({Cc:t,methodName:e,Bc:n,path:$i.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function md(t){var e=t._freezeSettings(),n=Nl(t._databaseId);return new yd(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gd(t,e,n,r,i,o){void 0===o&&(o={});var s=t.qc(o.merge||o.mergeFields?2:0,e,n,i);Nd("Data must be an object, but it was:",s,r);var a,u,c=xd(r,s);if(o.merge)a=new Yi(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Dd(e,f[h],n);if(!s.contains(d))throw new xi(Ai.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Ld(l,d)||l.push(d)}a=new Yi(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new hd(new ko(c),a,u)}var vd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Si.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Cc)throw t.Mc(1===t.Cc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ud);function bd(t,e,n){return new pd({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var wd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Si.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new As(t.path,new bs)},e.prototype.isEqual=function(t){return t instanceof e},e}(ud),_d=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,Si.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=bd(this,t,!0),n=this.Uc.map(function(t){return Ad(t,e)}),r=new ws(n);return new As(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ud),Td=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,Si.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=bd(this,t,!0),n=this.Uc.map(function(t){return Ad(t,e)}),r=new Ts(n);return new As(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ud),Ed=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return(0,Si.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new Is(t.R,ps(t.R,this.Qc));return new As(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ud);function Id(t,e,n,r){var i=t.qc(1,e,n);Nd("Data must be an object, but it was:",i,r);var o=[],s=ko.empty();Ki(r,function(t,r){var a=Od(e,t,n);r=(0,pt.m9)(r);var u=i.$c(a);if(r instanceof vd)o.push(a);else{var c=Ad(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Yi(o);return new fd(s,a,i.fieldTransforms)}function Sd(t,e,n,r,i,o){var s=t.qc(1,e,n),a=[Dd(e,r,n)],u=[i];if(o.length%2!=0)throw new xi(Ai.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Dd(e,o[c])),u.push(o[c+1]);for(var l=[],h=ko.empty(),f=a.length-1;f>=0;--f)if(!Ld(l,a[f])){var d=a[f],p=u[f];p=(0,pt.m9)(p);var y=s.$c(d);if(p instanceof vd)l.push(d);else{var m=Ad(p,y);null!=m&&(l.push(d),h.set(d,m))}}var g=new Yi(l);return new fd(h,g,s.fieldTransforms)}function kd(t,e,n,r){return void 0===r&&(r=!1),Ad(n,t.qc(r?4:3,e))}function Ad(t,e){if(Cd(t=(0,pt.m9)(t)))return Nd("Unsupported field value:",e,t),xd(t,e);if(t instanceof ud)return function(t,e){if(!dd(e.Cc))throw e.Mc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Mc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Cc)throw e.Mc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Ad(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,pt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ps(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Gi.fromDate(t);return{timestampValue:Ta(e.R,n)}}if(t instanceof Gi)return n=new Gi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ta(e.R,n)};if(t instanceof cd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ad)return{bytesValue:Ea(e.R,t._byteString)};if(t instanceof Kf){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:ka(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc("Unsupported field value: "+qf(t))}(t,e)}function xd(t,e){var n={};return Ji(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ki(t,function(t,r){var i=Ad(r,e.xc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Cd(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Gi||t instanceof cd||t instanceof ad||t instanceof Kf||t instanceof ud)}function Nd(t,e,n){if(!Cd(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=qf(n);throw e.Mc("an object"===r?t+" a custom object":t+" "+r)}}function Dd(t,e,n){if((e=(0,pt.m9)(e))instanceof sd)return e._internalPath;if("string"==typeof e)return Od(t,e);throw Pd("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Rd=new RegExp("[~\\*/\\[\\]]");function Od(t,e,n){if(e.search(Rd)>=0)throw Pd("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(sd.bind.apply(sd,(0,Si.ev)([void 0],e.split(".")))))._internalPath}catch(Rt){throw Pd("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Pd(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new xi(Ai.INVALID_ARGUMENT,(a+=". ")+t+u)}function Ld(t,e){return t.some(function(t){return t.isEqual(e)})}var Fd=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Kf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Md(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Vd("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Md=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Si.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Fd);function Vd(t,e){return"string"==typeof e?Od(t,e):e instanceof sd?e._internalPath:e._delegate._internalPath}var Ud=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),jd=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return(0,Si.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new qd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Vd("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Fd),qd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Si.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(jd),Bd=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Ud(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new qd(n._firestore,n._userDataWriter,r.key,r,new Ud(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new xi(Ai.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new qd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ud(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new qd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ud(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Gd(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Gd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Li()}}function Hd(t,e){return t instanceof jd&&e instanceof jd?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Bd&&e instanceof Bd&&t._firestore===e._firestore&&Yf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function zd(t){if(Xo(t)&&0===t.explicitOrderBy.length)throw new xi(Ai.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Kd=function(){};function Jd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Wd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Kc=e,i.jc=n,i.Wc=r,i.type="where",i}return(0,Si.ZT)(e,t),e.prototype._apply=function(t){var e=md(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new xi(Ai.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){ep(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(tp(r,t,l[c]));a={arrayValue:{values:u}}}else a=tp(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||ep(s,o),a=kd(n,"where",s,"in"===o||"not-in"===o);var h=Po.create(i,o,a);return function(t,e){if(e.g()){var n=es(t);if(null!==n&&!n.isEqual(e.field))throw new xi(Ai.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=ts(t);null!==r&&np(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new xi(Ai.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Kc,this.jc,this.Wc);return new Jf(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Qo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Kd),Qd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kc=e,r.Gc=n,r.type="orderBy",r}return(0,Si.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new xi(Ai.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new xi(Ai.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new zo(e,n);return function(t,e){if(null===ts(t)){var n=es(t);null!==n&&np(0,n,e.field)}}(t,r),r}(t._query,this.Kc,this.Gc);return new Jf(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Qo(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Kd),Zd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return(0,Si.ZT)(e,t),e.prototype._apply=function(t){return new Jf(t.firestore,t.converter,os(t._query,this.zc,this.Hc))},e}(Kd),$d=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,Si.ZT)(e,t),e.prototype._apply=function(t){var e=Xd(t,this.type,this.Jc,this.Yc);return new Jf(t.firestore,t.converter,function(t,e){return new Qo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Kd),Yd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,Si.ZT)(e,t),e.prototype._apply=function(t){var e=Xd(t,this.type,this.Jc,this.Yc);return new Jf(t.firestore,t.converter,function(t,e){return new Qo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Kd);function Xd(t,e,n,r){if(n[0]=(0,pt.m9)(n[0]),n[0]instanceof Fd)return function(t,e,n,r,i){if(!r)throw new xi(Ai.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=rs(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(bo(e,r.key));else{var c=r.data.field(u.field);if(io(c))throw new xi(Ai.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new xi(Ai.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Go(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=md(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new xi(Ai.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new xi(Ai.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ns(t)&&-1!==c.indexOf("/"))throw new xi(Ai.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Qi.fromString(c));if(!lo.isDocumentKey(l))throw new xi(Ai.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new lo(l);a.push(bo(e,h))}else{var f=kd(n,r,c);a.push(f)}}return new Go(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function tp(t,e,n){if("string"==typeof(n=(0,pt.m9)(n))){if(""===n)throw new xi(Ai.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ns(e)&&-1!==n.indexOf("/"))throw new xi(Ai.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Qi.fromString(n));if(!lo.isDocumentKey(r))throw new xi(Ai.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return bo(t,new lo(r))}if(n instanceof Kf)return bo(t,n._key);throw new xi(Ai.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+qf(n)+".")}function ep(t,e){if(!Array.isArray(t)||0===t.length)throw new xi(Ai.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new xi(Ai.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function np(t,e,n){if(!n.isEqual(e))throw new xi(Ai.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var rp=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),ho(t)){case 0:return null;case 1:return t.booleanValue;case 2:return no(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ro(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Li()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Ki(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new cd(no(t.latitude),no(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=oo(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(so(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=eo(t);return new Gi(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Qi.fromString(t);Fi($a(n));var r=new xf(n.get(1),n.get(3)),i=new lo(n.popFirst(5));return r.isEqual(e)||Ri("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function ip(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var op=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Si.ZT)(e,t),e.prototype.convertBytes=function(t){return new ad(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Kf(this.firestore,null,e)},e}(rp),sp=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=md(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=ap(t,this._firestore),i=ip(r.converter,e,n),o=gd(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Cs.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=ap(t,this._firestore);return o="string"==typeof(e=(0,pt.m9)(e))||e instanceof sd?Sd(this._dataReader,"WriteBatch.update",s._key,e,n,r):Id(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Cs.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=ap(t,this._firestore);return this._mutations=this._mutations.concat(new Hs(e._key,Cs.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new xi(Ai.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function ap(t,e){if((t=(0,pt.m9)(t)).firestore!==e)throw new xi(Ai.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var up=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Si.ZT)(e,t),e.prototype.convertBytes=function(t){return new ad(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Kf(this.firestore,null,e)},e}(rp);function cp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Bf(t,Kf);var o=Bf(t.firestore,ed),s=md(o);return hp(o,[("string"==typeof(e=(0,pt.m9)(e))||e instanceof sd?Sd(s,"updateDoc",t._key,e,n,r):Id(s,"updateDoc",t._key,e)).toMutation(t._key,Cs.exists(!0))])}function lp(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=(0,pt.m9)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||td(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(td(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Kf)c=Bf(t.firestore,ed),l=$o(t._key.path),u={next:function(e){i[a]&&i[a](fp(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=Bf(t,Jf);c=Bf(d.firestore,ed),l=d._query;var p=new up(c);u={next:function(t){i[a]&&i[a](new Bd(c,p,d,t))},error:i[a+1],complete:i[a+2]},zd(t._query)}return function(t,e,n,r){var i=this,o=new ff(r),s=new _h(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return(0,Si.mG)(i,void 0,void 0,function(){var e;return(0,Si.Jh)(this,function(n){switch(n.label){case 0:return e=mh,[4,If(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Si.mG)(i,void 0,void 0,function(){var e;return(0,Si.Jh)(this,function(n){switch(n.label){case 0:return e=gh,[4,If(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(nd(c),l,h,u)}function hp(t,e){return function(t,e){var n=this,r=new _u;return t.asyncQueue.enqueueAndForget(function(){return(0,Si.mG)(n,void 0,void 0,function(){var n;return(0,Si.Jh)(this,function(i){switch(i.label){case 0:return n=Oh,[4,Ef(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(nd(t),e)}function fp(t,e,n){var r=n.docs.get(e._key),i=new up(t);return new jd(t,i,e._key,r,new Ud(n.hasPendingWrites,n.fromCache),e.converter)}var dp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,Si.ZT)(e,t),e.prototype.get=function(e){var n=this,r=ap(e,this._firestore),i=new up(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new jd(n._firestore,i,r._key,t._document,new Ud(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=md(t)}return t.prototype.get=function(t){var e=this,n=ap(t,this._firestore),r=new op(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Li();var i=t[0];if(i.isFoundDocument())return new Fd(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Fd(e._firestore,r,n._key,null,n.converter);throw Li()})},t.prototype.set=function(t,e,n){var r=ap(t,this._firestore),i=ip(r.converter,e,n),o=gd(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=ap(t,this._firestore);return o="string"==typeof(e=(0,pt.m9)(e))||e instanceof sd?Sd(this._dataReader,"Transaction.update",s._key,e,n,r):Id(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=ap(t,this._firestore);return this._transaction.delete(e._key),this},t}());function pp(){if("undefined"==typeof Uint8Array)throw new xi(Ai.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function yp(){if("undefined"==typeof atob)throw new xi(Ai.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var mp=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return yp(),new t(ad.fromBase64String(e))},t.fromUint8Array=function(e){return pp(),new t(ad.fromUint8Array(e))},t.prototype.toBase64=function(){return yp(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return pp(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),gp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){od(t=Bf(t,ed));var n=nd(t),r=t._freezeSettings(),i=new hf;return id(n,i,new cf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){od(t=Bf(t,ed));var e=nd(t),n=t._freezeSettings(),r=new hf;return id(e,r,new lf(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new xi(Ai.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new _u;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Si.mG)(e,void 0,void 0,function(){var e;return(0,Si.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,Si.mG)(this,void 0,void 0,function(){return(0,Si.Jh)(this,function(e){switch(e.label){case 0:return Iu.yt()?[4,Iu.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Lc(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),vp=function(){function t(t,e,n){var r=this;this._delegate=e,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof xf||(this.Zc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Oi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Bf(t,zf))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Oi("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=(0,pt.Sg)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new xi(Ai.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Rf(new Nf(o,new fl(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Si.mG)(e,void 0,void 0,function(){var e,n;return(0,Si.Jh)(this,function(r){switch(r.label){case 0:return[4,wf(t)];case 1:return e=r.sent(),[4,Tf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Mi(t);return e.Or.delete(0),Vl(e)}(n))]}})})})}(nd(Bf(this._delegate,ed)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Si.mG)(e,void 0,void 0,function(){var e,n;return(0,Si.Jh)(this,function(r){switch(r.label){case 0:return[4,wf(t)];case 1:return e=r.sent(),[4,Tf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,Si.mG)(this,void 0,void 0,function(){var e;return(0,Si.Jh)(this,function(n){switch(n.label){case 0:return(e=Mi(t)).Or.add(0),[4,Ul(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(nd(Bf(this._delegate,ed)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Vf("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new _u;return t.asyncQueue.enqueueAndForget(function(){return(0,Si.mG)(e,void 0,void 0,function(){var e;return(0,Si.Jh)(this,function(r){switch(r.label){case 0:return e=Uh,[4,Ef(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(nd(Bf(this._delegate,ed)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new ff(e);return t.asyncQueue.enqueueAndForget(function(){return(0,Si.mG)(n,void 0,void 0,function(){var e;return(0,Si.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){Mi(t).Gr.add(e),e.next()},[4,If(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Si.mG)(n,void 0,void 0,function(){var e;return(0,Si.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){Mi(t).Gr.delete(e)},[4,If(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(nd(t=Bf(t,ed)),td(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new xi(Ai.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Rp(this,Qf(this._delegate,t))}catch(t){throw Ip(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Ep(this,Zf(this._delegate,t))}catch(t){throw Ip(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Cp(this,function(t,e){if(t=Bf(t,zf),Ff("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xi(Ai.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Jf(t,null,function(t){return new Qo(Qi.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Ip(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new _u;return t.asyncQueue.enqueueAndForget(function(){return(0,Si.mG)(n,void 0,void 0,function(){var n;return(0,Si.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return bf(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new pf(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(nd(t),function(n){return e(new dp(t,n))})}(this._delegate,function(n){return t(new wp(e,n))})},t.prototype.batch=function(){var t=this;return nd(this._delegate),new _p(new sp(this._delegate,function(e){return hp(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new xi(Ai.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new xi(Ai.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),bp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Si.ZT)(e,t),e.prototype.convertBytes=function(t){return new mp(new ad(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Ep.tu(e,this.firestore,null)},e}(rp),wp=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new bp(t)}return t.prototype.get=function(t){var e=this,n=Op(t);return this._delegate.get(n).then(function(t){return new Ap(e._firestore,new jd(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=Op(t);return n?(Mf("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Op(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Si.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Op(t);return this._delegate.delete(e),this},t}(),_p=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Op(t);return n?(Mf("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Op(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Si.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Op(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Tp=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new qd(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new xp(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.eu=function(e,n){var r=t.nu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new bp(e),n),i.set(n,o)),o},t}();Tp.nu=new WeakMap;var Ep=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new bp(t)}return t.su=function(e,n,r){if(e.length%2!=0)throw new xi(Ai.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Kf(n._delegate,r,new lo(e)))},t.tu=function(e,n,r){return new t(n,new Kf(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Rp(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Rp(this.firestore,Qf(this._delegate,t))}catch(t){throw Ip(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,pt.m9)(t))instanceof Kf&&$f(this._delegate,t)},t.prototype.set=function(t,e){e=Mf("DocumentReference.set",e);try{return function(t,e,n){t=Bf(t,Kf);var r=Bf(t.firestore,ed),i=ip(t.converter,e,n);return hp(r,[gd(md(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Cs.none())])}(this._delegate,t,e)}catch(t){throw Ip(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?cp(this._delegate,t):cp.apply(void 0,(0,Si.ev)([this._delegate,t,e],n))}catch(t){throw Ip(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return hp(Bf((t=this._delegate).firestore,ed),[new Hs(t._key,Cs.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Sp(e),i=kp(e,function(e){return new Ap(t.firestore,new jd(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return lp(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Bf(t,Kf);var e=Bf(t.firestore,ed),n=nd(e),r=new up(e);return function(t,e){var n=this,r=new _u;return t.asyncQueue.enqueueAndForget(function(){return(0,Si.mG)(n,void 0,void 0,function(){var n;return(0,Si.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Si.mG)(this,void 0,void 0,function(){var r,i;return(0,Si.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Mi(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new xi(Ai.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=lh(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,_f(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new jd(e,r,t._key,n,new Ud(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Bf(t,Kf);var e=Bf(t.firestore,ed);return Sf(nd(e),t._key,{source:"server"}).then(function(n){return fp(e,t,n)})}(this._delegate):function(t){t=Bf(t,Kf);var e=Bf(t.firestore,ed);return Sf(nd(e),t._key).then(function(n){return fp(e,t,n)})}(this._delegate)).then(function(t){return new Ap(e.firestore,new jd(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Tp.eu(this.firestore,e):null))},t}();function Ip(t,e,n){return t.message=t.message.replace(e,n),t}function Sp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!td(r))return r}return{}}function kp(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=td(t[0])?t[0]:td(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Ap=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Ep(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Hd(this._delegate,t._delegate)},t}(),xp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Si.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Ap),Cp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new bp(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Jd(this._delegate,function(t,e,n){var r=e,i=Vd("where",t);return new Wd(i,r,n)}(e,n,r)))}catch(e){throw Ip(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Jd(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Vd("orderBy",t);return new Qd(r,n)}(e,n)))}catch(e){throw Ip(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Jd(this._delegate,function(t){return Gf("limit",t),new Zd("limit",t,"F")}(e)))}catch(e){throw Ip(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Jd(this._delegate,function(t){return Gf("limitToLast",t),new Zd("limitToLast",t,"L")}(e)))}catch(e){throw Ip(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Jd(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $d("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Ip(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Jd(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $d("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Ip(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Jd(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yd("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Ip(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Jd(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yd("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Ip(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Yf(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Bf(t,Jf);var e=Bf(t.firestore,ed),n=nd(e),r=new up(e);return function(t,e){var n=this,r=new _u;return t.asyncQueue.enqueueAndForget(function(){return(0,Si.mG)(n,void 0,void 0,function(){var n;return(0,Si.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Si.mG)(this,void 0,void 0,function(){var r,i,o,s,a;return(0,Si.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Zc(t,e,!0)];case 1:return a=u.sent(),r=new kh(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=lh(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,_f(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Bd(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Bf(t,Jf);var e=Bf(t.firestore,ed),n=nd(e),r=new up(e);return kf(n,t._query,{source:"server"}).then(function(n){return new Bd(e,r,t,n)})}(this._delegate):function(t){t=Bf(t,Jf);var e=Bf(t.firestore,ed),n=nd(e),r=new up(e);return zd(t._query),kf(n,t._query).then(function(n){return new Bd(e,r,t,n)})}(this._delegate)).then(function(t){return new Dp(e.firestore,new Bd(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Sp(e),i=kp(e,function(e){return new Dp(t.firestore,new Bd(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return lp(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Tp.eu(this.firestore,e):null))},t}(),Np=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new xp(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Dp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Cp(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new xp(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Np(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new xp(n._firestore,r))})},t.prototype.isEqual=function(t){return Hd(this._delegate,t._delegate)},t}(),Rp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,Si.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Ep(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Ep(this.firestore,void 0===t?Zf(this._delegate):Zf(this._delegate,t))}catch(t){throw Ip(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Bf(t.firestore,ed),r=Zf(t),i=ip(t.converter,e);return hp(n,[gd(md(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Cs.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Ep(e.firestore,t)})},e.prototype.isEqual=function(t){return $f(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Tp.eu(this.firestore,t):null))},e}(Cp);function Op(t){return Bf(t,Kf)}var Pp,Lp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(sd.bind.apply(sd,(0,Si.ev)([void 0],t)))}return t.documentId=function(){return new t($i.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,pt.m9)(t))instanceof sd&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Fp=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new wd("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new vd("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _d("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Td("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Ed("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Mp=n(119),Vp={Firestore:vp,GeoPoint:cd,Timestamp:Gi,Blob:mp,Transaction:wp,WriteBatch:_p,DocumentReference:Ep,DocumentSnapshot:Ap,Query:Cp,QueryDocumentSnapshot:xp,QuerySnapshot:Dp,CollectionReference:Rp,FieldPath:Lp,FieldValue:Fp,setLogLevel:function(t){Ci.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Mp.wA("firestore",function(t){return function(t,e){return new vp(t,new ed(t,e),new gp)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Vp)))})(Pp=dt.Z),Pp.registerVersion("@firebase/firestore","2.3.6");var Up=n(959),jp=n(906),qp=n(882);function Bp(t,e){return"function"==typeof e?n=>n.pipe(Bp((n,r)=>(0,K.D)(t(n,r)).pipe((0,nt.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Gp(t))}class Gp{constructor(t){this.project=t}call(t,e){return e.subscribe(new Hp(t,this.project))}}class Hp extends qp.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new qp.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,qp.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var zp=n(489),Kp=n(570),Jp=n(895),Wp=n(291);class Qp extends Up.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Zp(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new Jp.N;if(this.isStopped||this.hasError?o=Kp.w.EMPTY:(this.observers.push(t),o=new Wp.W(this,t)),r&&t.add(t=new ht.ht(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||zp.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Zp{constructor(t,e){this.time=t,this.value=e}}function $p(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Qp(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const Yp=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),Xp=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var ty=n(75);function ey(t){return e=>0===t?(0,ty.c)():e.lift(new ny(t))}class ny{constructor(t){if(this.total=t,this.total<0)throw new Xp}call(t,e){return e.subscribe(new ry(t,this.total))}}class ry extends Y.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function iy(t=null){return e=>e.lift(new oy(t))}class oy{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new sy(t,this.defaultValue))}}class sy extends Y.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function ay(t=ly){return e=>e.lift(new uy(t))}class uy{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new cy(t,this.errorFactory))}}class cy extends Y.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Pp){t=Pp}this.destination.error(t)}}}function ly(){return new Yp}var hy=n(392);function fy(t,e){return e?Bp(()=>t,e):Bp(()=>t)}var dy=n(187);const py=new r.OlP("angularfire2.auth.use-emulator"),yy=new r.OlP("angularfire2.auth.settings"),my=new r.OlP("angularfire2.auth.tenant-id"),gy=new r.OlP("angularfire2.auth.langugage-code"),vy=new r.OlP("angularfire2.auth.use-device-language"),by=new r.OlP("angularfire.auth.persistence");let wy=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new G.HU(i),d=(0,G.ss)(h),p=new Up.xQ,y=(0,J.of)(void 0).pipe((0,ht.QV)(h.outsideAngular),Bp(()=>i.runOutsideAngular(()=>n.e(420).then(n.bind(n,420)))),(0,nt.U)(()=>(0,G.on)(t,i,e)),(0,nt.U)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return(0,G.sI)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),$p({bufferSize:1,refCount:!1}));if(f(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,J.of)(null);else{y.pipe(function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ut((e,n)=>t(e,n,r)):hy.y,ey(1),n?iy(e):ay(()=>new Yp))}()).subscribe();const t=y.pipe(Bp(t=>t.getRedirectResult().then(t=>t,()=>null)),d,$p({bufferSize:1,refCount:!1})),e=t=>new z.y(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=y.pipe(Bp(t=>e(t.onAuthStateChanged.bind(t)))),r=y.pipe(Bp(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(fy(n),(0,dy.R)(h.outsideAngular),(0,ht.QV)(h.insideAngular)),this.user=t.pipe(fy(r),(0,dy.R)(h.outsideAngular),(0,ht.QV)(h.insideAngular)),this.idToken=this.user.pipe(Bp(t=>t?(0,K.D)(t.getIdToken()):(0,J.of)(null))),this.idTokenResult=this.user.pipe(Bp(t=>t?(0,K.D)(t.getIdTokenResult()):(0,J.of)(null))),this.credential=(0,jp.T)(t,p,this.authState.pipe(ut(t=>!t))).pipe((0,nt.U)(t=>(null==t?void 0:t.user)?t:null),(0,dy.R)(h.outsideAngular),(0,ht.QV)(h.insideAngular))}return(0,G.pX)(this,y,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>p.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(G.Dh),r.LFG(G.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(py,8),r.LFG(yy,8),r.LFG(my,8),r.LFG(gy,8),r.LFG(vy,8),r.LFG(by,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(G.Dh),r.LFG(G.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(py,8),r.LFG(yy,8),r.LFG(my,8),r.LFG(gy,8),r.LFG(vy,8),r.LFG(by,8))},token:t,providedIn:"any"}),t})();function _y(t,e){return function(t,e=H.z){return new z.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Ty(t,e){return _y(t,e).pipe((0,nt.U)(t=>({payload:t,type:"query"})))}function Ey(t,e){return Ty(t,e).pipe($(void 0),X(),(0,nt.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Iy(t,e,n){return Ey(t,n).pipe(rt((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Sy(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Sy(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Sy(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new st(void 0,void 0)),(0,nt.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function Sy(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function ky(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(0,G.GT)(wy,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class Ay{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Ey(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,nt.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe($(void 0),X(),ut(([t,e])=>e.length>0||!t),(0,nt.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(rt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=ky(t);return Iy(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Ty(this.query,this.afs.schedulers.outsideAngular).pipe((0,nt.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,K.D)(this.query.get(t)).pipe((0,ht.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new xy(this.ref.doc(t),this.afs)}}class xy{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Py(n,e);return new Ay(r,i,this.afs)}snapshotChanges(){return function(t,e){return _y(t,e).pipe($(void 0),X(),(0,nt.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,nt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,K.D)(this.ref.get(t)).pipe((0,ht.QV)(this.afs.schedulers.insideAngular))}}class Cy{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Ey(this.query,this.afs.schedulers.outsideAngular).pipe((0,nt.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),ut(t=>t.length>0),this.afs.keepUnstableUntilFirst):Ey(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(rt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=ky(t);return Iy(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Ty(this.query,this.afs.schedulers.outsideAngular).pipe((0,nt.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,K.D)(this.query.get(t)).pipe((0,ht.QV)(this.afs.schedulers.insideAngular))}}const Ny=new r.OlP("angularfire2.enableFirestorePersistence"),Dy=new r.OlP("angularfire2.firestore.persistenceSettings"),Ry=new r.OlP("angularfire2.firestore.settings"),Oy=new r.OlP("angularfire2.firestore.use-emulator");function Py(t,e=(t=>t)){return{query:e(t),ref:t}}let Ly=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new G.HU(o),this.keepUnstableUntilFirst=(0,G.ss)(this.schedulers);const c=(0,G.on)(t,o,e);!ft.Z.auth&&u&&(0,G.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,G.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!f(i)){const e=()=>{try{return(0,K.D)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Pp){return"undefined"!=typeof console&&console.warn(Pp),(0,J.of)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,(0,J.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Py(n,e),o=this.schedulers.ngZone.run(()=>r);return new Ay(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Cy(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new xy(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(G.Dh),r.LFG(G.xv,8),r.LFG(Ny,8),r.LFG(Ry,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Dy,8),r.LFG(Oy,8),r.LFG(py,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(G.Dh),r.LFG(G.xv,8),r.LFG(Ny,8),r.LFG(Ry,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Dy,8),r.LFG(Oy,8),r.LFG(py,8))},token:t,providedIn:"any"}),t})(),Fy=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:Ny,useValue:!0},{provide:Dy,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Ly]}),t})();class My{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new Vy(t,this.dueTime,this.scheduler))}}class Vy extends Y.L{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Uy,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function Uy(t){t.debouncedNext()}var jy="firebasestorage.googleapis.com",qy=function(t){function e(n,r){var i=t.call(this,By(n),"Firebase Storage: "+r+" ("+By(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return(0,Si.ZT)(e,t),e.prototype._codeEquals=function(t){return By(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(pt.ZR);function By(t){return"storage/"+t}function Gy(){return new qy("unknown","An unknown error occurred, please check the error payload for server response.")}function Hy(){return new qy("canceled","User canceled the upload/download.")}function zy(){return new qy("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ky(t){return new qy("invalid-argument",t)}function Jy(){return new qy("app-deleted","The Firebase app was deleted.")}function Wy(t){return new qy("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qy(t,e){return new qy("invalid-format","String does not match format '"+t+"': "+e)}function Zy(t){throw new qy("internal-error","Internal error: "+t)}var $y={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Yy=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function Xy(t,e){switch(t){case $y.RAW:return new Yy(tm(e));case $y.BASE64:case $y.BASE64URL:return new Yy(em(t,e));case $y.DATA_URL:return new Yy((n=new nm(e)).base64?em($y.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(Pp){throw Qy($y.DATA_URL,"Malformed data URL.")}return tm(e)}(n.rest),new nm(e).contentType)}var n;throw Gy()}function tm(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function em(t,e){switch(t){case $y.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Qy(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case $y.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Qy(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(Pp){throw Qy(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var nm=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Qy($y.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),rm={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function im(t){switch(t){case"running":case"pausing":case"canceling":return rm.RUNNING;case"paused":return rm.PAUSED;case"success":return rm.SUCCESS;case"canceled":return rm.CANCELED;case"error":default:return rm.ERROR}}var om=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),sm=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=om.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=om.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=om.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Zy("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Zy("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Zy("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Pp){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Zy("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),am=function(){function t(){}return t.prototype.createXhrIo=function(){return new sm},t}(),um=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(Pp){return new t(e,"")}if(""===r.path)return r;throw new qy("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===jy?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var f=h[l.indices.path];f||(f=""),r=new t(h[l.indices.bucket],f),l.postModify(r);break}}if(null==r)throw function(t){return new qy("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),cm=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function lm(t){return"string"==typeof t||t instanceof String}function hm(t){return fm()&&t instanceof Blob}function fm(){return"undefined"!=typeof Blob}function dm(t,e,n,r){if(r<e)throw Ky("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw Ky("Invalid value for '"+t+"'. Expected "+n+" or less.")}function pm(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function ym(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var mm=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());!function(t){return void 0!==t}(a)?i():i(a)}catch(Pp){o(Pp)}else null!==s?((r=Gy()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?Jy():Hy():new qy("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new gm(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new gm(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===om.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new gm(s,n))}else{var a=n.getErrorCode()===om.ABORT;e(!1,new gm(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())},e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,(0,Si.ev)([null,t],e));else{var r;u()||s?l.call.apply(l,(0,Si.ev)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),gm=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function vm(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function bm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=vm();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(fm())return new Blob(t);throw new qy("unsupported-environment","This browser doesn't seem to support creating Blobs")}var wm=function(){function t(t,e){var n=0,r="";hm(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(hm(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(fm()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(bm.apply(null,r))}var i=e.map(function(t){return lm(t)?Xy($y.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function _m(t){var e;try{e=JSON.parse(t)}catch(Pp){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function Tm(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Em(t,e){return e}var Im=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Em}}(),Sm=null;function km(){if(Sm)return Sm;var t=[];t.push(new Im("bucket")),t.push(new Im("generation")),t.push(new Im("metageneration")),t.push(new Im("name","fullPath",!0));var e=new Im("name");e.xform=function(t,e){return function(t){return!lm(t)||t.length<2?t:Tm(t)}(e)},t.push(e);var n=new Im("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Im("timeCreated")),t.push(new Im("updated")),t.push(new Im("md5Hash",null,!0)),t.push(new Im("cacheControl",null,!0)),t.push(new Im("contentDisposition",null,!0)),t.push(new Im("contentEncoding",null,!0)),t.push(new Im("contentLanguage",null,!0)),t.push(new Im("contentType",null,!0)),t.push(new Im("metadata","customMetadata",!0)),Sm=t}function Am(t,e,n){var r=_m(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new um(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function xm(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var Cm=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function Nm(t){if(!t)throw Gy()}function Dm(t,e){return function(n,r){var i=Am(t,r,e);return Nm(null!==i),i}}function Rm(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new qy("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new qy("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new qy("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new qy("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function Om(t){var e=Rm(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new qy("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Pm(t,e,n){var r=pm(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Cm(r,"GET",Dm(t,n),i);return o.errorHandler=Om(e),o}function Lm(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var Fm=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function Mm(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(Pp){Nm(!1)}return Nm(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Vm=262144,Um=function(){return function(t,e,n){if(function(t){return"function"==typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function jm(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var qm=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=km(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Lm(e,r,i),a={name:s.fullPath},u=pm(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=xm(s,n),h=new Cm(u,"POST",function(t){var e;Mm(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(Pp){Nm(!1)}return Nm(lm(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=Rm(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n,r){var i=function(t,e,n,r){var i=new Cm(n,"POST",function(t){var e=Mm(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Pp){Nm(!1)}n||Nm(!1);var i=Number(n);return Nm(!isNaN(i)),new Fm(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=Rm(e),i}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=Vm*this._chunkMultiplier,n=new Fm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){var s;try{s=function(t,e,n,r,i,o,s,a){var u=new Fm(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new qy("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+l);if(null===d)throw zy();var p=new Cm(n,"POST",function(t,n){var i,s=Mm(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?Dm(e,o)(t,n):null,new Fm(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=Rm(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(Pp){return t._error=Pp,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){Vm*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e,n){var r=Pm(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Lm(e,r,i),c=xm(u,n),l=wm.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw zy();var h={name:u.fullPath},f=pm(o,t.host),d=t.maxUploadRetryTime,p=new Cm(f,"POST",Dm(t,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=Rm(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Hy(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=im(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Um(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(im(this._state)){case rm.SUCCESS:jm(this._resolve.bind(null,this.snapshot))();break;case rm.CANCELED:case rm.ERROR:jm(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(im(this._state)){case rm.RUNNING:case rm.PAUSED:t.next&&jm(t.next.bind(t,this.snapshot))();break;case rm.SUCCESS:t.complete&&jm(t.complete.bind(t))();break;case rm.CANCELED:case rm.ERROR:t.error&&jm(t.error.bind(t,this._error))();break;default:t.error&&jm(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),Bm=function(){function t(t,e){this._service=t,this._location=e instanceof um?e:um.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new um(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Tm(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new um(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Wy(t)},t}();function Gm(t){var e={prefixes:[],items:[]};return Hm(t,e).then(function(){return e})}function Hm(t,e,n){return(0,Si.mG)(this,void 0,void 0,function(){var r,i,o;return(0,Si.Jh)(this,function(s){switch(s.label){case 0:return[4,zm(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,Hm(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function zm(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n,r;return(0,Si.Jh)(this,function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&dm("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=pm(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new Cm(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=_m(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new um(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new um(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return Nm(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=Rm(e),u}(t.storage,t._location,"/",(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function Km(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new um(t._location.bucket,n);return new Bm(t.storage,r)}function Jm(t){return/^[A-Za-z]+:\/\//.test(t)}function Wm(t,e){if(t instanceof $m){var n=t;if(null==n._bucket)throw new qy("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Bm(n,n._bucket);return null!=e?Wm(r,e):r}if(void 0!==e){if(e.includes(".."))throw Ky('`path` param cannot contain ".."');return Km(t,e)}return t}function Qm(t,e){if(e&&Jm(e)){if(t instanceof $m)return new Bm(t,e);throw Ky("To use ref(service, url), the first argument must be a Storage instance.")}return Wm(t,e)}function Zm(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:um.makeFromBucketSpec(n,t)}var $m=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=jy,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?um.makeFromBucketSpec(i,this._host):Zm(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?um.makeFromBucketSpec(this._url,t):Zm(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){dm("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){dm("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return(0,Si.mG)(this,void 0,void 0,function(){var t,e;return(0,Si.Jh)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._getAppCheckToken=function(){return(0,Si.mG)(this,void 0,void 0,function(){var t;return(0,Si.Jh)(this,function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new Bm(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new cm(Jy());var i=function(t,e,n,r,i,o){var s=ym(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new mm(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},t.prototype.makeRequestWithTokens=function(t){return(0,Si.mG)(this,void 0,void 0,function(){var e;return(0,Si.Jh)(this,function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}})})},t}();function Ym(t,e){return Qm(t=(0,pt.m9)(t),e)}var Xm,tg,eg=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),ng=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new eg(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new eg(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new eg(t,i,i._ref))}:{next:e.next?function(t){return e.next(new eg(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),rg=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new ig(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new ig(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),ig=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return Km(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new ng(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new qm(t,new wm(e),n)}(t=(0,pt.m9)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=$y.RAW),this._throwIfRoot("putString");var r=Xy(e,t),i=(0,Si.pi)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new ng(new qm(this._delegate,new wm(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return Gm(t=(0,pt.m9)(t))}(this._delegate).then(function(e){return new rg(e,t.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return zm(t=(0,pt.m9)(t),e)}(this._delegate,t||void 0).then(function(t){return new rg(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return function(t){return(0,Si.mG)(this,void 0,void 0,function(){var e;return(0,Si.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=Pm(t.storage,t._location,km()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=(0,pt.m9)(t))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return(0,Si.mG)(this,void 0,void 0,function(){var n;return(0,Si.Jh)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=pm(e.fullServerUrl(),t.host),o=xm(n,r),s=t.maxOperationRetryTime,a=new Cm(i,"PATCH",Dm(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=Om(e),a}(t.storage,t._location,e,km()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(t=(0,pt.m9)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return function(t){return(0,Si.mG)(this,void 0,void 0,function(){var e;return(0,Si.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=pm(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Cm(r,"GET",function(t,e){return function(n,r){var i=Am(t,r,e);return Nm(null!==i),function(t,e,n){var r=_m(e);if(null===r)return null;if(!lm(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var r=t.fullPath;return pm("/b/"+o(t.bucket)+"/o/"+o(r),n)+ym({alt:"media",token:e})})[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=Om(e),o}(t.storage,t._location,km()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then(function(t){if(null===t)throw new qy("no-download-url","The given file does not have any download URLs.");return t})]}})})}(t=(0,pt.m9)(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return function(t){return(0,Si.mG)(this,void 0,void 0,function(){var e;return(0,Si.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=pm(e.fullServerUrl(),t.host),r=new Cm(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=Om(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=(0,pt.m9)(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Wy(t)},t}(),og=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Jm(t))throw Ky("ref() expected a child path but got a URL, use refFromURL instead.");return new ig(Ym(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Jm(t))throw Ky("refFromURL() expected a full URL but got a child path, use ref() instead.");try{um.makeFromUrl(t,this._delegate.host)}catch(Pp){throw Ky("refFromUrl() expected a valid full URL but got an invalid one.")}return new ig(Ym(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function sg(t){const e=function(t){return new z.y(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(function(t,e=H.P){return n=>n.lift(new My(t,e))}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,nt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function ag(t,e,n){return{getDownloadURL:()=>(0,J.of)(void 0).pipe((0,ht.QV)(e.outsideAngular),Bp(()=>t.getDownloadURL()),n),getMetadata:()=>(0,J.of)(void 0).pipe((0,ht.QV)(e.outsideAngular),Bp(()=>t.getMetadata()),n),delete:()=>(0,K.D)(t.delete()),child:r=>ag(t.child(r),e,n),updateMetadata:e=>(0,K.D)(t.updateMetadata(e)),put:(e,n)=>sg(t.put(e,n)),putString:(e,n,r)=>sg(t.putString(e,n,r)),listAll:()=>(0,K.D)(t.listAll())}}tg={TaskState:rm,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:$y,Storage:$m,Reference:ig},(Xm=dt.Z).INTERNAL.registerComponent(new Mp.wA("storage",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new og(r,new $m(r,i,o,new am,n,dt.Z.SDK_VERSION))},"PUBLIC").setServiceProps(tg).setMultipleInstances(!0)),Xm.registerVersion("@firebase/storage","0.5.4");const ug=new r.OlP("angularfire2.storageBucket"),cg=new r.OlP("angularfire2.storage.maxUploadRetryTime"),lg=new r.OlP("angularfire2.storage.maxOperationRetryTime");let hg=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new G.HU(i),this.keepUnstableUntilFirst=(0,G.ss)(this.schedulers);const a=(0,G.on)(t,i,e);this.storage=(0,G.sI)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return ag(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return ag(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return ag(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(G.Dh),r.LFG(G.xv,8),r.LFG(ug,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(cg,8),r.LFG(lg,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(G.Dh),r.LFG(G.xv,8),r.LFG(ug,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(cg,8),r.LFG(lg,8))},token:t,providedIn:"any"}),t})(),fg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})(),dg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[hg],imports:[fg]}),t})(),pg=(()=>{class t{constructor(){this.title="bag-of-stuff"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(t,e){1&t&&(r.TgZ(0,"h1"),r._uU(1,"CHRIS LIKES SMELLY FARTS"),r.qZA())},styles:[""]}),t})();const yg={apiKey:"AIzaSyBkdqqSRW1eklVLzbC9QrKz-8kClUeyvnQ",authDomain:"bag-of-stuff.firebaseapp.com",projectId:"bag-of-stuff",storageBucket:"bag-of-stuff.appspot.com",messagingSenderId:"1061438350232",appId:"1:1061438350232:web:3ebdeba5cc91fa17f081ed",measurementId:"G-E9YJW28941"};let mg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[pg]}),t.\u0275inj=r.cJS({providers:[],imports:[[B,G.hO.initializeApp(yg),Fy,dg]]}),t})();(0,r.G48)(),j().bootstrapModule(mg).catch(t=>console.error(t))},762:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>o,mG:()=>s,Jh:()=>a,XA:()=>u,CR:()=>c,ev:()=>l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}}},t=>{"use strict";t(t.s=793)}]);